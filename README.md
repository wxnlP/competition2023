## 1. å†…å®¹ç®€ä»‹

```
----competition2023
--Code  ä»£ç 
--Doc   æŒ‡å¯¼æ–‡æ¡£
--Pkgs  ç¯å¢ƒé…ç½®å®‰è£…åŒ…
--Model å»ºæ¨¡æ–‡ä»¶
```

### 1.1 è‡ªæˆ‘ä»‹ç»

æå¿—è±ªï¼Œ**æ²³å—äºº**ï¼Œå½•å–ä¸“ä¸šæ˜¯å·¥ä¸šå·¥ç¨‹ï¼Œå¤§ä¸€è½¬ä¸“ä¸šåˆ°äº†**æ™ºèƒ½åˆ¶é€ å·¥ç¨‹**(å¦‚æœæ˜¯å¤§ä¸€æ–°ç”Ÿæƒ³è¦**è½¬ä¸“ä¸š**çš„è¯å¯ä»¥è·Ÿæˆ‘è”ç³»äº†è§£ã€‚ä¸è¿‡å¤§ä¸€çš„åŒå­¦ä¸ä¸€å®šèƒ½è¯»åˆ°æˆ‘çš„è¿™ä»½æ–‡æ¡£ğŸ˜¶â€ğŸŒ«ï¸å“ˆå“ˆå“ˆï¼)ã€‚å¤§ä¸€åˆ°å¤§äºŒæ›¾åœ¨[æ ¡å›­å•è½¦å¿—æ„¿æœåŠ¡é˜Ÿ](https://lsmf.sspu.edu.cn/2021/2473/list.htm)å‘†è¿‡ä¸€æ®µæ—¶é—´ï¼Œå¯¹äºæˆ‘è¿™ç§å†…å‘çš„äººå±å®æ˜¯å¸®åˆ°äº†æŒºå¤šçš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä¹Ÿæ¨èå¤§å®¶å»æœåŠ¡é˜Ÿå­¦ä¹ è¿›æ­¥ã€‚æœ¬äººå‘¢ï¼ŒæŠ€æœ¯ä¸»è¦èµ°çš„**åµŒå…¥å¼è½¯ä»¶**æ–¹å‘ï¼Œæ¬¢è¿å¤§å®¶æ‰¾æˆ‘è¿›è¡ŒæŠ€æœ¯äº¤æµ(å¦‚æœæˆ‘åœ¨å¿™ç€è€ƒç ”é‚£å°±ç®—å–½å“ˆå“ˆğŸ¤£)ï¼Œä½†æ˜¯ç”±äºèµ·æ­¥æ¯”è¾ƒæ™šï¼Œå¤§äºŒæ¥è§¦åµŒå…¥å¼è¯¾ç¨‹æ‰å¼€å§‹å­¦ä¹ ï¼Œæ‰€ä»¥æŠ€æœ¯æ–¹é¢ä¹Ÿä¸æ˜¯å¾ˆæˆç†Ÿã€‚

å¥½å–½ï¼Œè‡ªæˆ‘ä»‹ç»å°±è¿™æ ·å§ï¼Œæ¯•ç«Ÿå’±ä¹Ÿä¸æ˜¯æŠ€æœ¯å¤§ä½¬ï¼Œæ‹¿çš„å¥–ä¹Ÿä¸å¤šã€‚å¦‚æœä½ è¯»åˆ°è¿™é‡Œï¼Œé‚£ä¹ˆæˆ‘å¾ˆåº†å¹¸èƒ½å¤Ÿè®¤è¯†ä½ ğŸ¤ï¼ŒåŠ æ²¹å“¦ğŸ‘»ğŸ‘»ğŸ‘»ğŸ‘»ğŸ‘»ğŸ‘»ã€‚

### 1.2 åˆè¡·

2023å¹´å…­æœˆä»½ï¼Œå³æš‘å‡æœŸé—´ï¼Œæˆ‘å’Œä¸€ä½åŒå­¦äº†è§£å¹¶å‚åŠ äº†[2023å¹´ä¸­å›½å¤§å­¦ç”Ÿå·¥ç¨‹å®è·µä¸åˆ›æ–°èƒ½åŠ›å¤§èµ›](http://www.gcxl.edu.cn/new/index.html)çš„æ ¡å†…é€‰æ‹”èµ›ï¼ŒæˆåŠŸè¿›å…¥å¸‚èµ›å¹¶å–å¾—ä¸Šæµ·å¸‚ç‰¹ç­‰å¥–è¿›å…¥å½“æ—¶çš„å›½èµ›ã€‚

å›½èµ›ç»“æŸåä¸æŒ‡å¯¼è€å¸ˆå•†é‡ï¼Œå†³å®šç¼–å†™[å·¥åˆ›èµ›æ™ºèƒ½ç”Ÿæ´»åƒåœ¾åˆ†ç±»èµ›é“](http://www.gcxl.edu.cn/new/res/20230630/Intelligence.pdf)çš„æ¯”èµ›æŒ‡å¯¼æ–‡æ¡£ï¼Œä¸»è¦ç›®çš„å¦‚ä¸‹ï¼š

- **åˆ†äº«æ¯”èµ›ç»éªŒ**ï¼Œå¸Œæœ›åç»­çš„åŒå­¦å¯ä»¥è¸Šè·ƒå‚åŠ å·¥åˆ›èµ›åŠå…¶ä»–ç«èµ›ã€‚
- **å°†ç«èµ›ä¼ æ‰¿ä¸‹å»**ï¼Œå¸Œæœ›åç»­åŒå­¦å¯ä»¥åœ¨â€œå·¨äººâ€çš„è‚©è†€ä¸Šæ›´ä¸Šä¸€å±‚æ¥¼ã€‚
- **åˆ†äº«å­¦ä¹ ç»éªŒ**ï¼Œå¸Œæœ›åç»­åŒå­¦åœ¨æŠ€æœ¯å­¦ä¹ ä¸Šå°‘èµ°ä¸€äº›å¼¯è·¯ã€‚
- **å¼¥è¡¥å›½èµ›é—æ†¾**ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åç»­åŒå­¦åœ¨å›½èµ›å–å¾—é“¶å¥–ç”šè‡³é‡‘å¥–çš„å¥½æˆç»©ï¼Œå¼¥è¡¥æˆ‘ä»¬åœ¨å›½èµ›ç•™ä¸‹çš„é—æ†¾ã€‚

æ–‡æ¡£ç¬¬ä¸€éƒ¨åˆ†æ˜¯å·¥åˆ›èµ›èµ›é“çš„ä»‹ç»ï¼Œæˆ‘ä¼šä¸»è¦ä»‹ç»â€œæ™ºèƒ½+â€çš„ç‰©æµå°è½¦å’Œç”Ÿæ´»åƒåœ¾åˆ†ç±»èµ›é“ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯é’ˆå¯¹2023å¹´å·¥åˆ›èµ›æ™ºèƒ½ç”Ÿæ´»åƒåœ¾åˆ†ç±»èµ›é“çš„æ¯”èµ›ä½¿ç”¨æ–¹æ¡ˆï¼Œå…¶ä¸­ä¹ŸåŒ…æ‹¬ä¸€äº›æ¶‰åŠåˆ°çš„æŠ€æœ¯ã€æºä»£ç ã€å»ºæ¨¡æ–‡ä»¶ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘ä¼šæ•´ç†ä¸Šä¼ åˆ°[Github](https://github.com/)ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä¼šæ”¾ä¸€äº›è‡ªå·±åœ¨ç”¨çš„å­¦ä¹ åœ°å€ï¼Œå’Œæˆ‘è‡ªå·±æ€»ç»“çš„çŸ¥è¯†åœ¨æˆ‘çš„[ä¸ªäººåšå®¢](https://tonmoon.top/)ï¼Œæ–¹ä¾¿å¤§å®¶å­¦ä¹ ç›¸å…³æŠ€æœ¯.

## 2. å·¥åˆ›èµ›ä»‹ç»

### 2.1 ä»€ä¹ˆæ˜¯å·¥åˆ›èµ›

> å…¨å›½å¤§å­¦ç”Ÿå·¥ç¨‹å®è·µä¸åˆ›æ–°èƒ½åŠ›å¤§èµ›åŸåå…¨å›½å¤§å­¦ç”Ÿ**å·¥ç¨‹è®­ç»ƒç»¼åˆèƒ½åŠ›ç«èµ›**ğŸ¤ºğŸ¤ºğŸ¤º
>
> åé¢å†…å®¹ä¼šç®€ç§°å…¶ä¸º**å·¥åˆ›èµ›**ã€‚

**å¤§èµ›çš„ç®€ä»‹ï¼š**

å…¨å›½å¤§å­¦ç”Ÿå·¥ç¨‹è®­ç»ƒç»¼åˆèƒ½åŠ›ç«èµ›æ˜¯å…¬ç›Šæ€§çš„å¤§å­¦ç”Ÿ[ç§‘æŠ€åˆ›æ–°](https://baike.baidu.com/item/ç§‘æŠ€åˆ›æ–°/1448199?fromModule=lemma_inlink)ç«æŠ€æ´»åŠ¨ï¼Œæ˜¯æœ‰è¾ƒå¤§å½±å“åŠ›çš„å›½å®¶çº§å¤§å­¦ç”Ÿç§‘æŠ€åˆ›æ–°ç«èµ›ï¼Œæ˜¯æ•™è‚²éƒ¨ã€è´¢æ”¿éƒ¨èµ„åŠ©çš„å¤§å­¦ç”Ÿç«èµ›é¡¹ç›®ï¼Œç›®çš„æ˜¯åŠ å¼ºå­¦ç”Ÿ[åˆ›æ–°èƒ½åŠ›](https://baike.baidu.com/item/åˆ›æ–°èƒ½åŠ›/5471826?fromModule=lemma_inlink)å’Œå®è·µèƒ½åŠ›åŸ¹å…»ï¼Œæé«˜æœ¬ç§‘[æ•™è‚²æ°´å¹³](https://baike.baidu.com/item/æ•™è‚²æ°´å¹³/22647919?fromModule=lemma_inlink)å’Œäººæ‰åŸ¹å…»è´¨é‡ã€‚ä¸ºå¼€åŠæ­¤é¡¹ç«èµ›ï¼Œç»[æ•™è‚²éƒ¨é«˜ç­‰æ•™è‚²å¸](https://baike.baidu.com/item/æ•™è‚²éƒ¨é«˜ç­‰æ•™è‚²å¸/0?fromModule=lemma_inlink)æ‰¹å‡†ï¼Œä¸“é—¨æˆç«‹äº†å…¨å›½å¤§å­¦ç”Ÿå·¥ç¨‹è®­ç»ƒç»¼åˆèƒ½åŠ›ç«èµ›ç»„ç»‡å§”å‘˜ä¼šå’Œä¸“å®¶å§”å‘˜ä¼šã€‚ç«èµ›ç»„å§”ä¼šç§˜ä¹¦å¤„è®¾åœ¨[å¤§è¿ç†å·¥å¤§å­¦](https://baike.baidu.com/item/å¤§è¿ç†å·¥å¤§å­¦/0?fromModule=lemma_inlink)ã€‚**æ¯ä¸¤å¹´ä¸€å±Šã€‚**

**2023å·¥åˆ›èµ›çš„å¤§èµ›ä¸»é¢˜ä¸ç›®çš„ï¼š**

æœ¬å±Šå¤§èµ›ä»¥**äº¤å‰èåˆ**å·¥ç¨‹åˆ›æ–°æ±‚å“è¶Šï¼Œå®ˆå¾·å´‡åŠ³**åˆ¶é€ å¼ºå›½**å‹‡æ‹…å½“ä¸ºä¸»é¢˜ï¼Œé¢å‘é€‚åº”å…¨çƒå¯æŒç»­å‘å±•éœ€æ±‚çš„å·¥ç¨‹å¸ˆåŸ¹å…»ï¼ŒæœåŠ¡äºå›½å®¶åˆ›æ–°é©±åŠ¨ä¸åˆ¶é€ å¼ºå›½æˆ˜ç•¥ï¼Œå¼ºåŒ–**å·¥ç¨‹åˆ›æ–°èƒ½åŠ›**ï¼ŒåšæŒç†è®ºå®è·µç»“åˆã€å­¦ç§‘ä¸“ä¸šäº¤å‰ã€æ ¡ä¼ååŒåˆ›æ–°ã€ç†å·¥äººæ–‡èé€šï¼Œåˆ›å»ºå…·æœ‰é²œæ˜ä¸­å›½ç‰¹è‰²çš„é«˜ç«¯å·¥ç¨‹åˆ›æ–°èµ›äº‹ï¼Œå»ºè®¾å¼•é¢†ä¸–ç•Œå·¥ç¨‹å®è·µæ•™è‚²å‘å±•æ–¹å‘çš„ç²¾å“å·¥ç¨‹ï¼Œæ„å»ºé¢å‘å·¥ç¨‹å®é™…ã€æœåŠ¡ç¤¾ä¼šéœ€æ±‚ã€æ ¡ä¼ååŒåˆ›æ–°çš„å®è·µè‚²äººå¹³å°ï¼ŒåŸ¹å…»æœåŠ¡åˆ¶é€ å¼ºå›½çš„å“è¶Šå·¥ç¨‹æŠ€æœ¯åå¤‡äººæ‰ï¼Œæ‰“é€ å…·æœ‰ä¸­å›½ç‰¹è‰²ä¸–ç•Œä¸€æµå·¥ç¨‹å®è·µä¸åˆ›æ–°æ•™è‚²ä½“ç³»ã€‚

**å„å¤§èµ›é“å‚åŠ æƒ…å†µï¼š**

![å·¥åˆ›èµ›èµ›é“](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708161574423.png)

å·¥åˆ›èµ›ä¸»è¦åˆ†ä»¥ä¸Šå…­ä¸ªèµ›é“ï¼Œå…¶ä¸­â€œæ™ºèƒ½+â€èµ›é“åˆ†ä¸ºç‰©æµå°è½¦å’Œç”Ÿæ´»åƒåœ¾åˆ†ç±»ï¼Œä¸»è¦è€ƒå¯ŸåµŒå…¥å¼ã€è§†è§‰ã€ç›®æ ‡æ£€æµ‹ã€æœºæ¢°ç»“æ„è®¾è®¡ç­‰æŠ€æœ¯ã€‚â€œæ–°èƒ½æºè½¦â€èµ›é“åˆ†ä¸ºå¤ªé˜³èƒ½å’Œæ¸©å·®ï¼Œä¸»è¦è€ƒå¯Ÿå‡¸è½®è®¾è®¡ã€RFIDç­‰ã€‚å…¶ä»–èµ›é“ä¸å¤ªäº†è§£ï¼Œå¯ä»¥å»[å®˜ç½‘](http://www.gcxl.edu.cn/new/index.html)çœ‹ä»‹ç»æ–‡æ¡£ã€‚2023å¹´æˆ‘æ ¡å‚åŠ çš„ä¸»è¦å°±æ˜¯æ ‡æ³¨çš„å››ä¸ªèµ›é“ï¼Œå…¶ä¸­å¤ªé˜³èƒ½ã€ç”Ÿæ´»åƒåœ¾åˆ†ç±»ã€é£è¡Œå™¨ä»¿çœŸéƒ½å„æœ‰ä¸€é˜Ÿè¿›å…¥å›½èµ›ï¼Œå–å¾—ä¸¤é“œä¸€é“¶çš„[æˆç»©](https://www.sspu.edu.cn/2023/1226/c2964a146806/page.htm)ã€‚

### 2.2 å·¥åˆ›èµ›å«é‡‘é‡

**é¦–å…ˆ**ï¼Œå…¨å›½å¤§å­¦ç”Ÿå·¥ç¨‹å®è·µä¸åˆ›æ–°èƒ½åŠ›å¤§èµ›å³å·¥åˆ›èµ›çš„**å›½èµ›**ï¼Œå±äºå¤§å­¦ç”Ÿç«èµ›ä¸­çš„[Aç±»èµ›äº‹](https://blog.csdn.net/qq_42898149/article/details/130682821)ã€‚å¤§å­¦ç”Ÿç«èµ›ä¸»è¦åˆ†ä¸ºABCDç±»ç«èµ›ï¼ŒAç±»ç«èµ›å«é‡‘é‡å’Œè®¤å¯åº¦ä¸ºæœ€é«˜ï¼Œå¦‚å¤§å®¶äº†è§£æ¯”è¾ƒå¤šçš„**äº’è”ç½‘+**ã€**æŒ‘æˆ˜æ¯**ã€**æ•°å­¦å»ºæ¨¡**ã€**ç”µèµ›**ç­‰ç­‰åŒå±Aç±»ç«èµ›ï¼Œæˆ‘ä»¬å­¦æ ¡å¯¹äºAç±»ç«èµ›åŒæ ·æœ‰è¯´æ˜ï¼š

![Aç±»ç«èµ›è¡¨](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708172385150.png)

è¿™ä¸ªè¡¨æ ¼æ¥æºäºå­¦ä¹ **ä¸Šæµ·ç¬¬äºŒå·¥ä¸šå¤§å­¦åˆ›æ–°åˆ›ä¸šå­¦åˆ†ç®¡ç†åŠæ³•** æ–‡æ¡£ï¼Œåœ¨å¤§å››æ¯ä¸ªä¸“ä¸šéƒ½æœ‰ä¸€é—¨åˆ›æ–°åˆ›ä¸šè¯¾ç¨‹éœ€è¦ä¸Šï¼Œè€Œè¿™é—¨è¯¾æœ‰ä¸€ç§å…ä¿®åŠæ³•ï¼Œåªè¦æ»¡è¶³æ¡ä»¶çš„åŒå­¦ä¾¿å¯ä»¥æå‡ºå…ä¿®ç”³è¯·ï¼Œæ¡ä»¶å¦‚ä¸‹ï¼š

![1708172566513](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708172566513.png)

âš âš âš --è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼ŒAç±»èµ›äº‹æŒ‡çš„æ˜¯æŸç±»èµ›äº‹çš„å›½èµ›ï¼Œè¯¥èµ›äº‹çš„å¸‚èµ›åªæ˜¯Cç±»æˆ–è€…æ˜¯Bç±»ã€‚ä¾‹å¦‚**ä¸Šæµ·ç¬¬äºŒå·¥ä¸šå¤§å­¦åˆ›æ–°åˆ›ä¸šå­¦åˆ†ç®¡ç†åŠæ³•** æ–‡æ¡£æ˜ç¡®æŒ‡å‡º**å…¨å›½å¤§å­¦ç”Ÿæœºæ¢°åˆ›æ–°è®¾è®¡å¤§èµ›**ä¸ºAç±»ï¼Œè€Œ**ä¸Šæµ·å¸‚å¤§å­¦ç”Ÿæœºæ¢°å·¥ç¨‹åˆ›æ–°å¤§èµ›**æ˜¯Cç±»èµ›äº‹ã€‚

æ€»çš„æ¥è¯´ï¼Œå·¥åˆ›èµ›ä½œä¸ºAç±»èµ›äº‹å«é‡‘é‡è¿˜æ˜¯å¾ˆè¶³çš„ï¼Œå¯¹äºä¸ªäººæŠ€æœ¯çš„å®è·µåˆ›æ–°å’Œå›¢é˜Ÿç»„ç»‡èƒ½åŠ›éƒ½æ˜¯ä¸€ç§æŒ‘æˆ˜ã€‚

### 2.3 å·¥åˆ›èµ›æ¯”èµ›å½¢å¼

åƒæœºæ¢°åˆ›æ–°è®¾è®¡å¤§èµ›ã€æŒ‘æˆ˜æ¯ç­‰æ¯”èµ›æ˜¯å¸¦ç€åˆ›æ–°ä½œå“å‚ä¸ç­”è¾©è¯„åˆ†ï¼Œå¯¹äºä½œå“çš„å½¢å¼ã€ç§ç±»æ²¡æœ‰è¦æ±‚ï¼Œæˆ–è€…åªä¼šè§„å®šä¸€ä¸ªå¤§æ¦‚çš„æ–¹å‘ã€‚å¦‚æœºåˆ›ä¼šè§„å®šä¸€ä¸ªå†œä¸šæœºæ¢°å’Œä»¿ç”Ÿä¸»é¢˜ï¼Œå…¶ä»–è‡ªç”±å‘æŒ¥ã€‚è€Œå·¥åˆ›èµ›ä¸åŒå…¶ä»–ä¸€äº›åˆ›æ–°åˆ›ä¸šç±»çš„æ¯”èµ›ï¼Œå·¥åˆ›èµ›ä¼šè§„å®šä¸€ä¸ªåº”ç”¨åœºæ™¯å’Œè£…ç½®éœ€è¦å®Œæˆçš„ä»»åŠ¡ï¼Œä»¥åŠä¸€äº›å°ºå¯¸ç”µå‹çš„ç»†è‡´è¦æ±‚ï¼›æœ€åçš„æ¯”èµ›å½¢å¼**æ²¡æœ‰ç­”è¾©**ï¼Œæ¯”èµ›è¿‡ç¨‹åˆ†ä¸ºåˆèµ›å’Œå†³èµ›ï¼Œåˆèµ›åˆ†æ•°ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š

- **æ–‡æ¡£ã€å¤–è§‚ã€åˆ›æ„è®¾è®¡**å 30%
- è£…ç½®è‡ªåŠ¨**å®ŒæˆæŒ‡å®šä»»åŠ¡**ï¼Œæ ¹æ®å‡†ç¡®ç‡è¯„åˆ†ï¼Œå 70%

é€šè¿‡åˆèµ›å†³å®šå‡ºå†³èµ›åå•ï¼Œç„¶åå†³èµ›å›¢é˜Ÿè¿›å…¥**åˆ›æ–°å®è·µç¯èŠ‚**ç¯èŠ‚ï¼Œæ ¹æ®æ¯”èµ›è¦æ±‚æ›´æ”¹è£…ç½®çš„æŸä¸€ä¸ªç»“æ„(ç°åœºå…¬å¸ƒï¼Œæ¯”èµ›å‰å¹¶ä¸çŸ¥é“)ï¼Œæ­¤ç¯èŠ‚éå¸¸è€ƒéªŒèµ›å‰å‡†å¤‡å’Œåº”å˜èƒ½åŠ›ã€‚-----**å åˆ†30%**

åé¢æ˜¯ç°åœºå†³èµ›ï¼Œè·Ÿåˆèµ›ä¸€æ ·å®Œæˆ**æŒ‡å®šä»»åŠ¡**ï¼Œä¼šæ¯”åˆèµ›éš¾ã€‚-----**å åˆ†70%**

![1708175264070](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708175264070.png)

**å…³äºç°åœºåˆèµ›ä¸ç°åœºå†³èµ›**ï¼š

ç°åœºåˆèµ›å’Œå†³èµ›æ˜¯åŸºæœ¬ä¸€æ ·çš„ï¼Œä¸åŒèµ›é¡¹å…·ä½“å·®å¼‚å‚è€ƒèµ›é“çš„è¯´æ˜æ–‡æ¡£ã€‚ç°åœºæ¯”èµ›æœ‰ä¸¤æ¬¡æœºä¼šï¼Œæ¯æ¬¡å¼€å§‹å‰æœ‰ä¸€å®šå‡†å¤‡æ—¶é—´ï¼Œ2023**å¸‚èµ›**å‡†å¤‡æ—¶é—´ï¼š**ç¬¬ä¸€è½®5åˆ†é’Ÿï¼Œç¬¬äºŒè½®3åˆ†é’Ÿ**ï¼›2023**å›½èµ›**å‡†å¤‡æ—¶é—´ï¼š**ç¬¬ä¸€è½®3åˆ†é’Ÿï¼Œç¬¬äºŒè½®3åˆ†é’Ÿ.**ä¸”æ™ºèƒ½+èµ›é“éƒ½æœ‰**æ—¶é—´é™åˆ¶**ï¼Œè¦ç‰¹åˆ«æ³¨æ„ã€‚

> âš ä¸€å®šè¦ä»”ç»†é˜…è¯»èµ›é“è¯´æ˜æ–‡æ¡£ï¼Œå¾ˆé‡è¦ï¼Œä¸è¦å‡ºç°è¿è§„ã€‚

## 3. æ™ºèƒ½ "+" èµ›é“ä»‹ç»

> æ™ºèƒ½ "+" èµ›é“æœ‰ç‰©æµå°è½¦å’Œç”Ÿæ´»åƒåœ¾åˆ†ç±»ä¸¤ä¸ªèµ›é¡¹
>
> æˆ‘å‚åŠ çš„æ˜¯**ç”Ÿæ´»åƒåœ¾åˆ†ç±»**ï¼Œæ‰€ä»¥æ­¤èµ›é¡¹åšæ³¨æ„æŒ‡å¯¼è¯´æ˜ï¼Œå¯¹äº**ç‰©æµå°è½¦**ä¹Ÿäº†è§£ä¸€äº›åšç®€å•ä»‹ç»æä¸€äº›æ„è§ã€‚

### 3.1 ç‰©æµå°è½¦

> **é˜…è¯»å£°æ˜ï¼š**æœ¬äººå¹¶ä¸æ˜¯å‚åŠ çš„è¿™ä¸ªèµ›é“ï¼Œæˆ‘ä»¥è‡ªå·±å›½èµ›ã€å¸‚èµ›è§åˆ°çš„å¾ˆå¤šä¼˜ç§€å°è½¦æ–¹æ¡ˆåšä¸€ä¸ªæ¨èï¼Œä¹Ÿæœ‰ä¸€äº›è‡ªå·±çš„è§è§£ï¼Œå› ä¸ºå¯¹è§„åˆ™ç ”ç©¶å¹¶ä¸æ˜¯å¾ˆå¤šæ‰€ä»¥æœ‰ä¸æ°å½“çš„åœ°æ–¹å¤šå¤šåŒ…å«ã€‚

#### 3.1.1 èµ›é¡¹ç®€ä»‹

é¦–å…ˆçœ‹ä¸€ä¸‹**ä½œå“è¦æ±‚ï¼š**

![1708177074464](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708177074464.png)

**æ¯”èµ›åœºåœ°ï¼š**

![1708177434452](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708177434452.png)

ç‰©æµçš„æ¯”èµ›è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š

1. æ”¾ç½®åˆ°å‡ºå‘ç‚¹ï¼Œä¸€é”®å¯åŠ¨ç‰©æµå°è½¦ã€‚
2. æ‰«æå¹¶è¯»å–äºŒç»´ç ï¼Œè·å–ç‰©æ–™é¡ºåºä¿¡æ¯ã€‚
3. ç‰©æµå°è½¦æ ¹æ®äºŒç»´ç ä¿¡æ¯ï¼Œå®Œæˆç‰©æµæ¬è¿ä»»åŠ¡ã€‚

#### 3.1.2 åŠŸèƒ½æ–¹æ¡ˆ

æ ¹æ®æ¯”èµ›è¦æ±‚å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæŠ€æœ¯æ–¹å‘ï¼š

- å°è½¦åº•ç›˜ï¼Œæ§åˆ¶å°è½¦ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œè¦éå¸¸ç²¾ç¡®ï¼Œä¸ç„¶ç‰©æ–™æŠ“ä¸åˆ°ã€‚
- æœºæ¢°è‡‚ï¼Œè®¾è®¡ä¸€æ¬¾æœºæ¢°è‡‚æŠ“å–ç‰©æ–™ã€‚
- è§†è§‰ï¼šè§†è§‰æ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ï¼Œéœ€è¦ï¼šæ‰«æäºŒç»´ç ã€è¯†åˆ«ç‰©æ–™é¢œè‰²ã€è¾…åŠ©åº•ç›˜è§†è§‰å®šä½ã€‚

> è¿™ä¸ªæ¯”èµ›åˆç†åˆ†å·¥å¾ˆé‡è¦ï¼Œåƒæˆ‘æ ¡èµ›æŠ€æœ¯æ–¹é¢ä¸€ä¸ªäººè´Ÿè´£ï¼Œè¯´å®è¯æŒºç´¯çš„ã€‚å¯ä»¥æ ¹æ®ä»¥ä¸Šä¸‰ä¸ªæŠ€æœ¯æ–¹é¢åšä¸€ä¸ªåˆ†å·¥ï¼Œç•™ä¸€ä¸ªäººå†™æ–‡æ¡£ã€‚

##### **åº•ç›˜ï¼š**

è½®å­æ˜¯[éº¦å…‹çº³å§†è½®](https://baike.baidu.com/item/%E9%BA%A6%E5%85%8B%E7%BA%B3%E5%A7%86%E8%BD%AE/3827219)æˆ–[å…¨å‘è½®](https://baike.baidu.com/item/%E5%85%A8%E5%90%91%E8%BD%AE/10635596)ï¼Œä¸¤ç§è½®å­éƒ½å¯ä»¥è¿›è¡Œå¤šæ–¹å‘è‡ªç”±ç§»åŠ¨ï¼Œ**æ¨è**ä½¿ç”¨**éº¦å…‹çº³å§†è½®**ï¼Œå¥½ä¸Šæ‰‹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å­¦æ ¡åŒå­¦éƒ½ä½¿ç”¨çš„æ–¹æ¡ˆã€‚

![img](https://raw.githubusercontent.com/wxnlP/pic/main/competition/9a504fc2d56285354e2f2a2f9fef76c6a6ef63f5.jpg)

![img](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1f178a82b9014a90f4558b25a3773912b31bee3b.jpg)

ç”µæœºé€‰æ‹©ï¼Œç›´æµå‡é€Ÿç”µæœºå’Œæ­¥è¿›ç”µæœºï¼Œæ¨è**ç›´æµå‡é€Ÿç”µæœº**å³å¯ï¼Œé…åˆPIDç®—æ³•åšé—­ç¯æ§åˆ¶ã€‚é€‰æ‹©å‡é€Ÿç”µæœºè¦æ³¨æ„ä¸€ä¸ªå‚æ•°ï¼š**å‡é€Ÿæ¯”**ï¼Œ30å³å¯ä¸è¦å¤ªä½å’Œå¤ªé«˜ã€‚

![1708179037254](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708179037254.png)

> **æ¨èå•†å®¶**ï¼š[äºšåšæ™ºèƒ½ ](https://detail.tmall.com/item.htm?abbucket=11&id=609082685065&ns=1&spm=a21n57.1.0.0.1e08523cq3ZLQM)å’Œ [è½®è¶£ç§‘æŠ€](https://detail.tmall.com/item.htm?abbucket=11&id=645920794388&ns=1&spm=a21n57.1.0.0.1e08523cq3ZLQM)

å¼€å‘æ¿é€‰æ‹©ï¼Œæ¨èstm32å’Œarduinoï¼Œæœ‰åŸºç¡€å¯ä»¥ä½¿ç”¨stm32ï¼Œå­¦ä¹ èµ·æ¥å¯èƒ½éš¾ä¸€äº›ï¼›arduinoç›¸å¯¹ç®€å•å¾ˆå¤šã€‚

stm32å¯ä»¥é€‰ç”¨**stm32f103c8t6**å’Œ**stm32f103ZET6**ä¸¤ç§èŠ¯ç‰‡ï¼Œæ»¡è¶³å››ä¸ªç¼–ç å™¨çš„å®šæ—¶å™¨éœ€æ±‚ï¼Œå¯ä»¥æŒ‚è½½å¤šä¸ªå¤–è®¾ï¼Œå¼•è„šå¤Ÿç”¨ã€‚ä¸æ¨èè´­ä¹°å­¦ä¹ æ¿ï¼Œä¹°ä¸€ä¸ªå°ä¸€äº›èµ„æºå¤Ÿç”¨çš„æ¿å­å°±å¯ä»¥ï¼Œæœ‰èƒ½åŠ›ç”¨PCBç”»ä¸€ä¸ªå¤–è®¾æ‹“å±•æ¿ï¼Œæ¯”ç”¨æœé‚¦çº¿è¿æ¥è¿å»å¯é å¾ˆå¤šã€‚

arduinoé€‰å‹å°±ç®€å•å¾ˆå¤šï¼Œæ€•èµ„æºä¸å¤Ÿå°±ç”¨**arduino mega**ï¼Œæˆ–è€…**arduino uno**ï¼Œèµ„æºå°‘ä¸€äº›ã€‚

![1708179801996](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708179801996.png)

![1708179849308](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708179849308.png)

##### æœºæ¢°è‡‚ï¼š

æœºæ¢°è‡‚æ¯”èµ›ä½¿ç”¨çš„åˆ†ä¸‰ç±»

1.å…­è‡ªç”±åº¦èˆµæœºæœºæ¢°è‡‚

åŸºæœ¬æœºæ„å¤§å·®ä¸å·®ï¼Œæœ‰ä¸€äº›åŒå­¦ä¼šå¯¹æœºæ¢°è¿›è¡Œç®€å•æ”¹é€ ï¼Œç¬¬ä¸€ä¸ªè‡ªç”±åº¦èˆµæœºæœ€åç”¨ä¸€ä¸ªæ‰­çŸ©å¤§ä¸€äº›é˜²æ­¢çªç„¶çƒ§åã€‚åŒæ—¶æœºæ¢°çˆªéƒ¨åˆ†æœ€åè‡ªå·±è®¾è®¡ï¼Œæ ¹æ®ç‰©æ–™å’Œè‡ªå·±è®¾è®¡çš„æœºæ¢°è‡‚è¿åŠ¨æ–¹å¼ã€‚

![1708180164128](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708180164128.png)

2.å››è‡ªç”±åº¦

![1708180530493](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708180530493.png)



3.ä¸¤è‡ªç”±åº¦æ­¥è¿›ç”µæœºæœºæ¢°è‡‚

è¿™ç§éƒ½æ˜¯è‡ªå·±3Dæ‰“å°è®¾è®¡

[ç‚¹å‡»æŸ¥çœ‹æ¡ˆä¾‹](https://www.bilibili.com/video/BV1VN411s7RL/?spm_id_from=333.337.search-card.all.click&vd_source=9360af603fa540663a17ba65dbad6a7d)

1ã€2æ–¹æ¡ˆéƒ½éœ€è¦å¤šä¸ªèˆµæœºï¼Œå»ºè®®ä¹°ä¸€ä¸ª[èˆµæœºæ‹“å±•æ¿](https://item.taobao.com/item.htm?ali_refid=a3_430582_1006:1104166432:N:Df97QAFv155N5cA0zdwOaHVxV3dNIHPA:4956869d531a473180413af89bd8570a&ali_trackid=1_4956869d531a473180413af89bd8570a&id=19214924650&spm=a21n57.1.0.0)

![1708181153870](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708181153870.png)

##### è§†è§‰

è§†è§‰é‡‡ç”¨openmvæˆ–è€…å·¥æ§æœºæ­é…opencvï¼Œå·¥æ§æœºå¯ä»¥ç”¨æ ‘è“æ´¾ã€‚æ¨è**openmv**å³å¯ï¼Œä¸Šæ‰‹ç®€å•ã€‚

[openmvè´­ä¹°é“¾æ¥](https://item.taobao.com/item.htm?abbucket=11&id=612497720394&ns=1&spm=a21n57.1.0.0.1e08523cq3ZLQM)

![1708180921426](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708180921426.png)

> **ç¡¬ä»¶æ–¹æ¡ˆéƒ½æ˜¯å…¶æ¬¡çš„ï¼Œé‡è¦çš„æ˜¯å®šä½ç®—æ³•å’Œæœºæ¢°è‡‚è·¯å¾„è§„åˆ’çš„å‡†ç¡®æ€§ã€‚**

#### 3.1.3 æ³¨æ„äº‹é¡¹

![1708181319625](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708181319625.png)

![1708181378802](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708181378802.png)

![1708181443508](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708181443508.png)

### 3.2 ç”Ÿæ´»åƒåœ¾åˆ†ç±»

#### 3.2.1 èµ›é¡¹ç®€ä»‹

##### **ä½œå“è¦æ±‚ï¼š**

> è¿™ä¸€éƒ¨åˆ†æ˜¯å¯¹ä½œå“åŠŸèƒ½çš„æ€»ä½“æ¦‚æ‹¬ï¼Œçœ‹çœ‹å°±è¡Œï¼Œé‡ç‚¹éƒ½å·²ç»åŠ æ·±æ ‡æ³¨äº†ã€‚éœ€è¦æ³¨æ„çš„å°±æ˜¯åˆ†ç±»æ ‡ç­¾ã€å‹ç¼©è£…ç½®ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚

![1708238068702](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238068702.png)

##### **åŠŸèƒ½è¦æ±‚ï¼š**

> è¿™ä¸€éƒ¨åˆ†æ˜¯æœ€é‡è¦çš„ï¼Œæ¶µç›–äº†æˆ‘ä»¬ä½œå“æœ€åçš„åŠŸèƒ½

- ä½œå“é¡¶éƒ¨ï¼Œ**å›ºå®šæŠ•æ”¾å£**(åˆèµ›130x130ï¼Œå†³èµ›ç°åœºå…¬å¸ƒ)ã€‚
- ç”±**ä¸€ä¸ªäºº**å°†åƒåœ¾æ”¾å…¥æŠ•æ”¾å£ã€‚ä½œå“**è‡ªåŠ¨è¯†åˆ«åˆ†ç±»**è‡³åƒåœ¾æ¡¶ã€‚
- å¯å›æ”¶åƒåœ¾éœ€è¦**å‹ç¼©è£…ç½®**ï¼Œä¸”å¿…é¡»åœ¨å…¨éƒ¨åƒåœ¾åˆ†ç±»ä»»åŠ¡å®Œæˆå‰å®Œæˆã€‚
- **é«˜äº®æ˜¾ç¤ºå±**ï¼Œå¯ä»¥æ’­æ”¾å®£ä¼ è§†é¢‘ï¼Œæ˜¾ç¤ºæŠ•æ”¾åƒåœ¾çš„ä¿¡æ¯ã€æ»¡è½½æƒ…å†µã€‚
- **å¾…æœº**æ—¶**å¾ªç¯æ’­æ”¾**å®£ä¼ è§†é¢‘ã€‚

![1708238221030](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238221030.png)

##### **é©±åŠ¨è¦æ±‚ï¼š**

> æ³¨æ„ç”µå‹è¦æ±‚ï¼Œä¸å¤§äº24ä¼ï¼Œæˆ‘ä»¬å›½èµ›å› ä¸ºé«˜äº†0.03Væ²¡æœ‰ç»™æˆç»©æ’åºğŸ˜­ğŸ˜­ğŸ˜­(è¿™é‡Œä¸åæ§½äº†ï¼Œåˆ˜è€å¸ˆæ¯”èµ›å‰è‚¯å®šä¼šå˜±å’ä½ ä»¬çš„ï¼Œ**ä¸è¦æŠ¥æœ‰ä¾¥å¹¸å¿ƒç†ï¼Œä¸¥æ ¼æŒ‰ç…§è§„åˆ™**)ã€‚

![1708238242954](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238242954.png)

##### **æœºæ¢°ç»“æ„è¦æ±‚ï¼š**

> è¿™é‡Œä¸ç”¨è¢«è‡ªä¸»è®¾è®¡å“åˆ°ï¼Œåªè¦ä¸æ˜¯æ•´ç†å…¨ä¹°çš„æˆå“å°±è¡Œï¼Œèƒ½ç”¨3Dæ‰“å°å°±ç”¨ï¼Œæ¯•ç«Ÿç»è´¹æœ‰é™å“ˆå“ˆå“ˆã€‚

![1708238282657](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238282657.png)

##### **å¤–å½¢å°ºå¯¸è¦æ±‚ï¼š**

> ä½œå“åˆ¶ä½œæ—¶ä¸€å®šè¦è€ƒè™‘é«˜åº¦ï¼Œç‰¹åˆ«æ˜¯æ ¡èµ›ï¼Œå› ä¸ºåé¢è¦è€ƒè™‘å†³èµ›çš„å¤šç§åƒåœ¾åˆ†ç±»ï¼Œè‚¯å®šä¼šæˆ–å¤šæˆ–å°‘åŠ é«˜ã€‚

![1708238312134](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238312134.png)

**æŠ•æ”¾çš„ç‰©æ–™ï¼š**

> ç‰©æ–™è¿™é‡Œä¸ç»†è¯´ï¼Œåé¢çš„ç¨‹åºéƒ¨åˆ†ä¼šè¯¦ç»†è¯´ï¼Œæˆ‘ä»¬å›½èµ›ä¹Ÿæ˜¯è¸©äº†å‘çš„ã€‚

![1708238345013](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708238345013.png)

**ç”Ÿæ´»åƒåœ¾åˆ†ç±»èµ›é“æœ€é‡è¦çš„é™¤äº†è§†è§‰æ–¹é¢å°±æ˜¯ç»“æ„æ­å»ºæ–¹é¢ï¼Œæœ€è€—æ—¶é—´çš„ä¹Ÿæ˜¯ç»“æ„è®¾è®¡å’Œæ­å»ºï¼Œæ­å»ºä»¥åè°ƒè¯•ç¨‹åºå°±æ˜¯å¾ˆæ–¹ä¾¿å’Œå¿«ä¹çš„ã€‚**

> ä¸Šè¯‰ä¸º**2023**å¹´çš„æ¯”èµ›è¯´æ˜æ–‡æ¡£ï¼Œæ¯å¹´æ–‡æ¡£å·®çš„ä¸å¤šï¼Œä½†ä¸€å®šä»¥è‡ªå·±**å½“ä¸‹æ–‡æ¡£ä¸ºæ ‡å‡†**åˆ¶ä½œä½œå“ï¼Œç‰¹åˆ«æ˜¯**å°ºå¯¸è¦æ±‚**ï¼Œä¸€ç‚¹éƒ½ä¸èƒ½è¶…è¿‡ã€‚

#### 3.2.2 äººå‘˜åˆ†å·¥

äººå‘˜åˆ†å·¥å¾ˆé‡è¦ï¼Œè¿™é‡Œç‰¹åˆ«è¯´æ˜å›¢é˜Ÿä¸­**ä¸è¦æœ‰æ··å­**ï¼Œæˆ‘æ˜¯æ·±æœ‰ä½“ä¼šçš„ã€‚æ ¡èµ›æœŸé—´æ˜¯æˆ‘å’Œä¸€ä½æœ‹å‹ä¸¤ä¸ªäººå‚èµ›çš„ï¼Œä¸€å¼€å§‹4ä¸ªäººå› ä¸ºæ€åº¦æ¶ˆææ²Ÿé€šåè¸¢äº†ä¸¤ä¸ªï¼Œåé¢æˆ‘è´Ÿè´£æŠ€æœ¯éƒ¨åˆ†ï¼Œå¦ä¸€ä½åŒå­¦è´Ÿè´£æ–‡æ¡£å’Œå™¨ä»¶è´­ä¹°ç­‰å·¥ä½œï¼Œæœ€åé€šå®µå¥½å‡ å¤©æ‰å®Œæˆä½œå“ã€‚è¿˜è¦ä¸€ç»„æ—¶ä¸€ä¸ªäººå¹²çš„æ ¡èµ›ï¼Œåé¢è¿›å›½èµ›äº†ï¼Œä¹Ÿæ˜¯å¾ˆå¼ºå“ˆå“ˆå“ˆğŸ‘ğŸ‘ğŸ‘ã€‚åºŸè¯ä¸å¤šè¯´äº†ï¼Œä¸‹é¢è¯´å››ä¸ªäººåˆ†å·¥ï¼Œä¹Ÿæ˜¯ç†æƒ³çŠ¶æ€çš„å››ä¸ªäººçš„å®šä½ï¼š

1. **æœºæ¢°ç»“æ„è®¾è®¡**ï¼Œè´Ÿè´£ä½œå“æ•´ä½“å¾—ç»“æ„è®¾è®¡ï¼ŒåŒ…æ‹¬ææ–™é€‰æ‹©ã€åˆ†ç±»æ–¹å¼ã€æŠ•æ”¾å£ã€å‹ç¼©è£…ç½®ã€å¤–è§‚ç­‰ç­‰ï¼Œå½“ç„¶å¾ˆå¤šéœ€è¦è®¨è®ºå•†é‡ï¼Œæœ€åä¸»è¦ç”±è¿™ä½åŒå­¦å’Œç»„é•¿æ•²å®šå³å¯ã€‚
2. **æ§åˆ¶ç»“æ„è®¾è®¡**ï¼Œè´Ÿè´£åˆ†ç±»è£…ç½®å¾—æ§åˆ¶éƒ¨åˆ†ï¼Œæ ¹æ®æ•²å®šå¾—åˆ†ç±»æ–¹å¼è¿›è¡Œæ§åˆ¶è®¾è®¡ï¼Œä¸»è¦åŒ…æ‹¬æ»¡è½½ã€ç¿»æ–—è¿åŠ¨ã€æœºæ¢°è‡‚è¿åŠ¨ç­‰ï¼Œéœ€è¦æœ€åå’Œè§†è§‰åŒå­¦ä¸€èµ·è°ƒè¯•ä½œå“ã€‚
3. **è§†è§‰ç»“æ„**ï¼Œè´Ÿè´£ç›®æ ‡æ£€æµ‹æ¨¡å‹ã€è§†è§‰æ–¹æ¡ˆé€‰æ‹©ï¼Œè¿™éƒ¨åˆ†å¾ˆé‡è¦ï¼Œæ²¡æœ‰è§†è§‰å…¶ä»–éƒ¨åˆ†éƒ½æ˜¯0ï¼Œä¸€åˆ†æ‹¿ä¸åˆ°çš„ã€‚
4. **æ–‡æ¡£å’Œææ–™è´­ä¹°**ï¼Œæˆ‘ä»¬å­¦æ ¡æŠ¥é”€é‡‡ç”¨ä»£ä»˜æ–¹å¼ï¼Œéœ€è¦æ•´ç†å‘ç¥¨ï¼Œæ‰€ä»¥å‘ç¥¨åœ¨ä¸€ä¸ªäººæ‰‹é‡Œå¾ˆæ–¹ä¾¿ï¼Œå¦å¤–å°±æ˜¯æ–‡æ¡£ä¹¦å†™ï¼Œé€šå¸¸è¦ç”±5åƒå­—ä»¥ä¸Šæ¯”è¾ƒå¥½ã€‚

å½“ç„¶ä»¥ä¸Šæ—¶ç†æƒ³ä¸­çš„äººå‘˜åˆ†å·¥ï¼Œå®æ—¶ä¸Šå¾ˆéš¾æ‰¾çš„æ»¡è¶³ä»¥ä¸Šèƒ½åŠ›çš„äººï¼Œæ‰€ä»¥éœ€è¦ä¸ªåˆ«èƒ½åŠ›å¼ºçš„æˆå‘˜å¤šè´Ÿè´£ä¸€éƒ¨åˆ†å†…å®¹ã€‚æˆ‘ä»¬å½“æ—¶å¸‚èµ›åŠå›½èµ›çš„åˆ†å·¥æ˜¯ï¼š

1. æˆ‘ï¼Œè´Ÿè´£è§†è§‰æ¨¡å‹è®­ç»ƒã€æœºæ¢°ç»“æ„è®¾è®¡ï¼Œéƒ¨åˆ†ç»“æ„é€‰å‹ã€‚å¸‚èµ›ç»“æ„é™¤åˆ†ç±»æ–¹å¼å¤§ä½“æœ€åæ²¿ç”¨æˆ‘æ ¡èµ›è®¾è®¡å†…å®¹ï¼Œæ‰€ä»¥æ ¡èµ›ä»¥åçš„æœºæ¢°ç»“æ„éƒ¨åˆ†ç”±æ§åˆ¶ç»“æ„çš„åŒå­¦æ‰¿æ‹…äº†å¾ˆå¤šã€‚
2. é›·åŒå­¦ï¼Œè´Ÿè´£æ§åˆ¶ç»“æ„è®¾è®¡ï¼Œæ§åˆ¶ç¨‹åºã€å†³èµ›æœºæ¢°è‡‚ç»“æ„è®¾è®¡ã€éƒ¨åˆ†æœºæ¢°ç»“æ„è®¾è®¡ã€‚
3. æ¯›åŒå­¦ï¼Œè´Ÿè´£æ–‡æ¡£ä¹¦å†™ã€‚
4. é¾™åŒå­¦ï¼Œè´Ÿè´£æ¨¡å‹è®­ç»ƒçš„ç…§ç‰‡æ ‡æ³¨ï¼Œæ¿€å…‰åˆ‡å‰²ï¼Œææ–™è´­ä¹°ç­‰ã€‚

åœ¨æˆ‘çœ‹æ¥æˆ‘ä»¬çš„åˆ†å·¥ä¹Ÿæ˜¯æ¯”è¾ƒåˆç†çš„ï¼Œæˆ‘å’Œé›·åŒå­¦åˆ†æ‹…äº†æœºæ¢°ç»“æ„è®¾è®¡éƒ¨åˆ†ï¼Œè¿™æ ·ä¸ºæˆ‘ä»¬ç¨‹åºè°ƒè¯•ä¹Ÿæä¾›ä¸€å®šä¾¿åˆ©ã€‚

> âš è¿˜æ˜¯å»ºè®®æœºæ¢°ç»“æ„å°½é‡å•ç‹¬æ‰¾ä¸€ä¸ªåŒå­¦ï¼Œå†™ç¨‹åºä»¥å¤–è´Ÿè´£æœºæ¢°ç»“æ„è®¾è®¡ï¼Œä¼šä¸€å®šç¨‹åº¦æ‹–æ…¢ç¨‹åºè¿›åº¦ï¼Œä¸”ç»“æ„è®¾è®¡çœŸçš„å¾ˆçƒ¦ï¼Œç‰¹åˆ«å¯¹æˆ‘è¿™ç§ä¸å–œæ¬¢åšæœºæ¢°ç»“æ„çš„äººå“ˆå“ˆå“ˆå“ˆã€‚

## 4. ç”Ÿæ´»åƒåœ¾åˆ†ç±»æ–¹æ¡ˆ

### 4.1 æœºæ¢°ç»“æ„è®¾è®¡

> å…ˆè¯´ä¸€è¯´æœºæ¢°ç»“æ„è®¾è®¡å§ï¼Œæ¯•ç«Ÿç”¨äº†å¾ˆé•¿çš„æ—¶é—´ã€‚

#### 4.1.1 ææ–™é€‰æ‹©

**é“æï¼š**ç»“æ„ä¸€å®šè¦ç¨³å®šï¼Œå› ä¸ºè¦è€ƒè™‘åç»­å»å…¶ä»–å­¦æ ¡æ¯”èµ›çš„æ—¶å€™è¦é•¿é€”è¿è¾“ï¼Œç‰¹åˆ«æ˜¯å›½èµ›è·¨çœè¿è¿‡å»ä¼šæ‰å¾ˆå¤šèºä¸ã€‚æ‰€ä»¥ä½œå“**â€éª¨éª¼â€œ**æ¡†æ¶ç”¨æ¬§æ ‡20çš„é“æï¼Œæœ€å¥½ä¸è¦ç”¨30æˆ–40ä»¥ä¸Šé™¤éç»“æ„éœ€è¦ï¼Œå› ä¸ºçœŸçš„å¾ˆé‡ã€‚é•¿åº¦ä¸å¯¹å¯ä»¥ä½¿ç”¨å·¥è®­ä¸­å¿ƒä¸€æ¥¼çš„é“£åºŠé’»æ–­ã€‚

![1708242805223](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708242805223.png)

**é“æè¿æ¥é”®**ï¼šå»ºè®®ä½¿ç”¨è¿™ç§ç›´è§’è§’ç ï¼›æˆ‘ä»¬ä¹Ÿç”¨è¿‡ä¸€äº›å†…ç½®çš„è¿æ¥ä»¶å¹¶ä¸å¥½ç”¨ï¼Œå½“æ—¶è€ƒè™‘è£…äºšå…‹åŠ›æ¿å¥½è£…ä½†æ°æ°ç›¸åï¼Œæ‰€ä»¥ä¸æ¨èï¼Œç›´è§’è§’ç ç›¸å¯¹å®‰è£…æ›´ç®€å•ã€‚

![1708242924344](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708242924344.png)

![1708243045701](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708243045701.png)

å‰é¢æåˆ°è¿è¾“è¿‡ç¨‹ä¸­èºä¸å®¹æ˜“æ‰ï¼Œæ‰€ä»¥åœ¨é“æåº•éƒ¨ç”¨ç›´è§’é“å›ºå®šï¼Œé˜²æ­¢ç»“æ„å˜å‹ã€‚

![1708243175301](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708243175301.png)

**äºšå…‹åŠ›æ¿**ï¼Œæ ¹æ®ä¸åŒç”¨å¤„å¯¹äºäºšå…‹åŠ›æ¿çš„åšåº¦é€‰æ‹©æœ‰ä¸€ç‚¹é€‰æ‹©ï¼š

- **4mm**ï¼Œ--->ç”¨äºå¤–å£³è£…é…æˆ–å°ç¨‹åº¦æ”¯æ’‘é¢ã€‚
- **4mmä»¥ä¸Š**ï¼Œ--->ç”¨äºéœ€è¦æ”¯æ’‘é‡é‡è¾ƒå¤§çš„åœ°æ–¹ã€‚
- **8mmä»¥ä¸Š**ï¼Œ--->ç”¨äºå‹ç¼©æŠµæŒ¡é¢ï¼Œéœ€è¦æ‰¿å—1000Nä»¥ä¸Šçš„åŠ›ã€‚

![1708243391533](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708243391533.png)

#### 4.1.2 ç»“æ„è®¾è®¡

> ä¸‹é¢æ˜¯ç»“æ„è®¾è®¡æ–¹æ¡ˆï¼Œä»ä¸‹å¾€ä¸Šä»‹ç»ã€‚

è£…é…å›¾ï¼š

![1708260715405](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708260715405.png)

**åƒåœ¾æ¡¶**ï¼Œå››ä¸ªæ¡¶å°ºå¯¸ä¸€æ ·ï¼Œæ¯”è§„å®šå°ºå¯¸è¦å¤§ä¸€äº›å…·ä½“å¤šå°‘å¿˜è®°äº†ï¼Œå¯ä»¥é‡ä¸€é‡ã€‚å»ºè®®æ¯”æˆ‘ä»¬çš„æ¡¶å°ä¸€äº›ã€‚

**å‹ç¼©è£…ç½®**ï¼Œä½¿ç”¨[è·¯æ˜“24Vç”µåŠ¨æ¨æ†å¹³åº•åº§](https://item.taobao.com/item.htm?id=545827512337&spm=pc_detail.27183998/evo365560b447259.202206.2.29c67dd6VCTesE)ï¼Œæœ‰å¾ˆå¤šé€Ÿåº¦å’Œæ¨åŠ›å¯é€‰ï¼Œç»“åˆéœ€æ±‚é€‰è´­ã€‚

![1708244316987](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708244316987.png)

**åˆ†ç±»è£…ç½®**ï¼Œç”¨äºšå…‹åŠ›æ¿æ‹¼è£…çš„ï¼Œå°ºå¯¸çœ‹æˆ‘çš„UGå›¾çº¸å°±å¥½ï¼Œè¡¨é¢é“ºçš„A4çº¸ã€‚åšçš„æ¯”è¾ƒç®€é™‹ï¼Œè¿™é‡Œ**ä¸å»ºè®®ç»§ç»­é‡‡ç”¨**ï¼Œå›½èµ›å‰å¤§ç»™çš„åœŸè±†å¾ˆå°è€Œä¸”æ˜¯æ¹¿çš„(å¿…é¡»åæ§½ä¸€ä¸‹å‰å¤§ğŸ¤£)ï¼Œå¾ˆå®¹æ˜“æ²¾ä¸Šé¢ã€‚

> å¾ˆå¤šä¸œè¥¿å‚è€ƒå®éªŒå®¤çš„å®ç‰©ä¼šæ›´æ¸…æ¥šä¸€äº›ã€‚

### 4.2 æ§åˆ¶ç»“æ„è®¾è®¡

> æ§åˆ¶ç»“æ„åˆ†åˆèµ›å’Œå†³èµ›ï¼Œåˆèµ›è¾ƒä¸ºç®€å•ï¼Œå†³èµ›å°±æ˜¯æŠŠåˆ†ç±»æ–¹æ³•æ”¹ä¸ºäº†æœºæ¢°è‡‚æŠ“å–ã€‚ç”±äºåˆèµ›å†³èµ›æœ€å¥½æ˜¯ä¸€ä¸ªæˆå“ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€èµ·è¯´ã€‚åŒºåˆ†æ–¹æ³•ä¸ºåƒåœ¾ä¸ªæ•°ï¼Œåƒåœ¾ä¸ºä¸€ä¸ªå³åˆèµ›ï¼Œåƒåœ¾å¤šä¸ªå³å†³èµ›ã€‚

#### 4.2.1 ç¡¬ä»¶é€‰æ‹©

##### ä¸»æ§é€‰æ‹©

æ§åˆ¶æ¿é€‰æ‹©çš„æ˜¯**Arduino mega**(ç‰©æ–™å°è½¦éƒ¨åˆ†æœ‰æåˆ°)ï¼Œå…³äºArduino megaï¼š

Arduino Mega 2560æ˜¯åŸºäºATmega2560çš„ä¸»æ§å¼€å‘æ¿ã€‚Arduino Mega2560æ˜¯é‡‡ç”¨USBæ¥å£çš„æ ¸å¿ƒç”µè·¯æ¿ã€‚å…·æœ‰54è·¯æ•°å­—è¾“å…¥è¾“å‡ºï¼Œé€‚åˆéœ€è¦å¤§é‡IOæ¥å£çš„è®¾è®¡ã€‚å¤„ç†å™¨æ ¸å¿ƒæ˜¯ATmega2560,åŒæ—¶å…·æœ‰54è·¯æ•°å­—è¾“å…¥/è¾“å‡ºå£ï¼Œ16è·¯æ¨¡æ‹Ÿè¾“å…¥ï¼Œ4è·¯UARTæ¥å£ï¼Œä¸€ä¸ª16MHzæ™¶ä½“æŒ¯è¡å™¨ï¼Œä¸€ä¸ªUSBå£ï¼Œä¸€ä¸ªç”µæºæ’åº§ï¼Œä¸€ä¸ªICSP headerå’Œä¸€ä¸ªå¤ä½æŒ‰é’®ã€‚æ¿ä¸Šæœ‰æ”¯æŒä¸€ä¸ªä¸»æ§æ¿çš„æ‰€æœ‰èµ„æºã€‚Arduino Mega2560ä¹Ÿèƒ½å…¼å®¹ä¸ºArduino NUOè®¾è®¡çš„æ‰©å±•æ¿ã€‚å¯ä»¥è‡ªåŠ¨é€‰æ‹©3ä¸­ä¾›ç”µæ–¹å¼ï¼šå¤–éƒ¨ç›´æµç”µæºé€šè¿‡ç”µæºæ’åº§ä¾›ç”µï¼›ç”µæ± è¿æ¥ç”µæºè¿æ¥å™¨çš„GNDå’ŒVINå¼•è„šï¼›USBæ¥å£ç›´æµä¾›ç”µã€‚

![1708249530582](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708249530582.png)

##### åˆ†ç±»è£…ç½®æ§åˆ¶é€‰æ‹©

1.**å•ç§åƒåœ¾**åˆ†ç±»é€‰æ‹©äºŒè½´äº‘å°æ§åˆ¶ï¼Œå³ä¸¤ä¸ªèˆµæœºå®Œæˆç¿»è½¬è¿åŠ¨ï¼›è¦é€‰æ‹©é«˜ç²¾åº¦èˆµæœºï¼Œ20kgä»·æ ¼åœ¨70~90ä¹‹é—´ã€‚

å¯ä»¥è¯•è¯•äºšåšæ™ºèƒ½çš„èˆµæœºï¼š[äºšåšæ™ºèƒ½15/20/25kgé‡‘å±æ•°å­—èˆµæœº](https://detail.tmall.com/item.htm?abbucket=11&id=624218042549&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

![1708250207978](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708250207978.png)

2.**å¤šç§åƒåœ¾**æ˜¯é‡‡ç”¨ä¸¤ä¸ªæ­¥è¿›ç”µæœºæ§åˆ¶æœºæ¢°è‡‚xã€yè½´è¿åŠ¨ï¼Œç„¶åç”±4ä¸ªèˆµæœºæ§åˆ¶æŠ“å–ã€‚æ­¥è¿›ç”µæœºé€‰ç”¨å¥½ä¸€äº›çš„ä½†ä¹Ÿä¸éœ€è¦å¾ˆå¤§ï¼Œè¿™é‡Œæ¨èæˆ‘ä»¬ä½¿ç”¨çš„æ­¥è¿›ç”µæœºï¼š[42æ­¥è¿›ç”µæœº](https://item.taobao.com/item.htm?abbucket=11&id=582210006047&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6) ï¼Œç»è¿‡ä½¿ç”¨æµ‹è¯•ï¼Œè´¨é‡æ˜¯å¤Ÿç”¨çš„ã€‚é˜²æ­¢æ­¥è¿›ç”µæœºä¸¢æ­¥æƒ…å†µï¼Œæ­¥è¿›ç”µæœºé¡»é…å¤‡é—­ç¯æ§åˆ¶å™¨ï¼š[42æ­¥è¿›é—­ç¯ç”µæœºé©±åŠ¨å™¨æ¨¡å—](https://item.taobao.com/item.htm?abbucket=11&id=635439412574&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)ï¼Œé€‰ç”¨**3Dæ‰“å°å¥—é¤**å³å¯ã€‚

![1708250513291](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708250513291.png)

##### æ»¡è½½æ£€æµ‹

é€‰ç”¨è¶…å£°æ³¢ï¼Œæ ¹æ®æµ‹è·åˆ¤æ–­æ˜¯å¦æ»¡è½½ã€‚å› ä¸ºåƒåœ¾æ¡¶è§„å®šä¸ºé€æ˜ï¼Œçº¢å¤–æµ‹è·ä¼šå—åˆ°å½±å“ï¼Œè¶…å£°æ³¢åˆ™ä¸ä¼šå—åˆ°å½±å“ã€‚

![1708261211492](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708261211492.png)

#### 4.2.2 é©±åŠ¨é€‰æ‹©

> é©±åŠ¨æ–¹é¢ä¸»è¦å°±æ˜¯æ¶‰åŠåˆ°èˆµæœºã€æ­¥è¿›ç”µæœºã€ç¨³å‹ã€‚

##### èˆµæœºæ‹“å±•æ¿

> è£…ç½®æ¶‰åŠåˆ°çš„èˆµæœºè¾¾åˆ°äº†10ä¸ªå·¦å³ï¼Œæ‰€ä»¥é…å¤‡ä¸€ä¸ªèˆµæœºæ‹“å±•æ¿æ§åˆ¶æ›´ç®€å•ä¸”æ–¹ä¾¿ï¼Œå¹»å°”ç§‘æŠ€å’Œäºšåšæ™ºèƒ½çš„æ‹“å±•æ¿åŠŸèƒ½å¤šä¸€äº›ï¼Œå…·å¤‡ä¸²å£æˆ–è“ç‰™è°ƒè¯•åŠŸèƒ½(å¯¹äºæœºæ¢°è‡‚æ›´æœ‰ç”¨)ï¼Œä»·æ ¼ä¹Ÿæ›´é«˜ä¸€äº›ï¼›ç¬¬ä¸‰ä¸ªé“¾æ¥åˆ™ä¾¿å®œä¸€äº›ï¼Œä¸å…·å¤‡ä¸²å£æˆ–è“ç‰™è°ƒè¯•åŠŸèƒ½ã€‚

[å¹»å°”ç§‘æŠ€16è·¯èˆµæœºæ§åˆ¶å™¨](https://item.taobao.com/item.htm?ali_refid=a3_430582_1006:1104166432:N:WHux2QBZPmZN5cA0zdwOaDVt9Q0NFo+R:dd29ba326e47e84a8e79131e1ba60692&ali_trackid=1_dd29ba326e47e84a8e79131e1ba60692&id=23334420583&spm=a21n57.1.0.0)

[äºšåšæ™ºèƒ½16è·¯èˆµæœºé©±åŠ¨æ¿](https://detail.tmall.com/item.htm?abbucket=11&id=648919288356&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

[16è·¯PWM Servoèˆµæœºé©±åŠ¨æ¿æ¨¡å—](https://detail.tmall.com/item.htm?abbucket=11&id=624505789589&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

> èˆµæœºæ‹“å±•æ¿éœ€è¦é€šè¿‡ç”µæ± ç¨³å‹æ¥å…¥ç”µæºï¼Œè€Œèˆµæœºç”µæºä¸€èˆ¬ä¸º5~8Vï¼Œè°ƒåˆ°6.5Vä¸ªäººè®¤ä¸ºè¾ƒåˆé€‚ã€‚èˆµæœºæ•°é‡å¢åŠ ä¼šå¯¼è‡´ç”µæµå¢é«˜ï¼Œæ‰€ä»¥ç¨³å‹æ¨¡å—çš„è¾“å‡ºç”µæµè¦å°½å¯èƒ½é«˜ï¼Œæ¨èæœ€åä¸€ä¸ªé“¾æ¥çš„ç¨³å‹æ¨¡å—ã€‚

[æ•°æ˜¾8Aå¸¦ç¨³å‹é™å‹æ¨¡å—](https://detail.tmall.com/item.htm?abbucket=11&id=621270751162&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

##### æ­¥è¿›ç”µæœºé—­ç¯é©±åŠ¨

> æ­¥è¿›ç”µæœºç”¨äºå†³èµ›æŠ“å–ï¼Œç²¾åº¦è¦æ±‚å¾ˆé«˜ï¼Œé—­ç¯é©±åŠ¨æ¿å±äºå¿…å¤‡ï¼

[42æ­¥è¿›é—­ç¯ç”µæœºé©±åŠ¨å™¨æ¨¡å—](https://item.taobao.com/item.htm?abbucket=11&id=635439412574&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

#### 4.2.3 æ§åˆ¶ç®—æ³•



### 4.3 ç›®æ ‡æ£€æµ‹ç¯å¢ƒæ­å»º

#### 4.3.1 ç¡¬ä»¶é€‰æ‹©

è§†è§‰é‡‡ç”¨**æ ‘è“æ´¾4B**+**USBæ‘„åƒå¤´**+**7å¯¸ç”µå®¹å±**

> æ ‘è“æ´¾æ¨èäº†ä¸¤å®¶ï¼Œäºšåšæ™ºèƒ½æ˜¯å¤§å‚ï¼Œä»·æ ¼ä¼šè´µä¸€äº›ä¹Ÿä¼šé€ä¸€äº›èµ„æ–™å’Œäº¤æµç¾¤(ä¸ªäººæ„Ÿè§‰èµ„æ–™ç”¨å¤„ä¸å¤§ï¼Œä¸å¦‚ä¸Šç½‘æŸ¥)ï¼Œä¸è¿‡ç°åœ¨æ ‘è“æ´¾é™ä»·äº†ï¼Œä¹Ÿå¯ä»¥æ¥å—ã€‚åä¸€å®¶ä¼šä¾¿å®œä¸€äº›ï¼Œæˆ‘åé¢éƒ½æ˜¯åœ¨è¿™ä¸€å®¶ä¹°çš„ï¼Œå”®åä¹Ÿæœ‰è§£å†³è¿‡ä¸€äº›é—®é¢˜ã€‚

æ ‘è“æ´¾4B-4GBï¼š[æ ‘è“æ´¾4B Raspberry Pi 4 ](https://item.taobao.com/item.htm?abbucket=11&id=621469430002&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6&skuId=4398973969748)ï¼Œ[äºšåšæ™ºèƒ½ Raspberry Piæ ‘è“æ´¾4B ](https://detail.tmall.com/item.htm?abbucket=11&id=608798378397&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6)

> è¿™ä¸ªæ ‘è“æ´¾æ•™ç¨‹ç®—æ˜¯å¬ä¸é”™çš„ï¼ŒåŸºç¡€é…ç½®ä¼šæ•™ï¼ŒåµŒå…¥å¼å¼€å‘ä¹Ÿä¼šæ•™ï¼Œä¸è¿‡è¿™ä¸ªç³»åˆ—å¥½åƒæ²¡æœ‰æ›´æ–°å®Œï¼Œä¸è¿‡çœ‹å®Œå°±å¯¹æ ‘è“æ´¾äº†è§£ä¸å°‘äº†ã€‚å¦å¤–ï¼Œæˆ‘ç”¨æ ‘è“æ´¾å¼•è„šæƒ…å†µå¾ˆå°‘ï¼Œæ›´å¤šæ˜¯åšè§†è§‰ï¼Œåªéœ€è¦ä¸€ä¸ªæ‘„åƒå¤´å°±å¥½äº†ï¼Œåº§æ¤…ä¸éœ€è¦è¿‡å¤šå­¦ä¹ ï¼Œä½†è¦äº†è§£Linuxå‘½ä»¤ï¼Œç”¨å¤šäº†å°±ç†Ÿç»ƒäº†ã€‚

æ ‘è“æ´¾è§†é¢‘å­¦ä¹ ï¼š[æ ‘è“æ´¾ååˆ†é’Ÿç©è½¬ç³»åˆ—å…¥é—¨ç¯‡_](https://www.bilibili.com/video/BV16U4y1879Q/?spm_id_from=333.1007.top_right_bar_window_custom_collection.content.click&vd_source=9360af603fa540663a17ba65dbad6a7d)

> æ‘„åƒå¤´å…¶å®ä¸€å¼€å§‹ç”¨çš„æ˜¯å®˜æ–¹äºŒä»£æ‘„åƒå¤´ï¼Œä½†æ˜¯æ ¡èµ›å‰ä¸€å¤©æ™šä¸Šçªç„¶åäº†ï¼Œå½“æ—¶ä¸´æ—¶å€Ÿçš„ä¸€ä¸ªæ‘„åƒå¤´ï¼Œé‡æ–°è°ƒè¯•è§’åº¦å®Œæˆçš„æ¯”èµ›ï¼›åæ¥ä¹°äº†ä¸€ä¸ªåˆè«åå…¶å¦™çš„åäº†ï¼Œæ‰€ä»¥åæ¥æ¢äº†USBæ‘„åƒå¤´ï¼Œä¸å®¹æ˜“åã€‚

æ ‘è“æ´¾å®˜æ–¹æ‘„åƒå¤´ï¼š[æ ‘è“æ´¾å®˜æ–¹åŸè£…æ‘„åƒå¤´Pi ](https://item.taobao.com/item.htm?abbucket=11&id=43818975625&ns=1&spm=a21n57.1.0.0.1d60523ckabwS6&skuId=5080403811329)

> æ ‘è“æ´¾å®˜æ–¹äºŒä»£æ‘„åƒå¤´åƒç´ æ˜¯800ä¸‡ï¼Œå…¶å®å¤Ÿç”¨ï¼Œè¿™ä¸ªUSBæ‘„åƒå¤´æ˜¯1200ä¸‡ï¼Œå¾ˆæ¸…æ™°ã€‚æˆ‘è¿˜æ˜¯**æ¨è**æ ‘è“æ´¾å®˜æ–¹äºŒä»£æ‘„åƒå¤´ï¼Œåªæœ‰ä»–ä¸å‡ºå¥‡æ€ªé—®é¢˜è¿˜æ˜¯å¾ˆå¥½ç”¨çš„ã€‚(æé†’ä¸€ä¸‹**ä¸è¦ä¹°3ä»£**ï¼Œå®ƒä»…æ”¯æŒæœ€æ–°ç³»ç»Ÿï¼Œå¾ˆå¤šé…ç½®éƒ½ä¸æ–¹ä¾¿ï¼Œæ‰¾ä¸åˆ°æ•™ç¨‹)

USBæ‘„åƒå¤´ï¼š[1200ä¸‡ç”µè„‘æ‘„å½±å¤´USBå·¥ä¸šæ‘„åƒå¤´4K](https://detail.tmall.com/item.htm?id=728497114308&skuId=5053096577058&spm=a1z10.1-b-s.w4004-25044152529.11.217fccc9kjp3b7)

> æ˜¾ç¤ºå±ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œä¸€ç§æ•°æ®çº¿æ¥å£åœ¨åé¢ä¸€ç§åœ¨ä¾§é¢ï¼Œ**æ¨è**ä¹°åœ¨ä¾§é¢çš„ã€‚æœ€å¥½é€‰è§¦æ‘¸æ¬¾ï¼Œè°ƒè¯•ä»£ç æ–¹ä¾¿ã€‚

7å¯¸æ˜¾ç¤ºå±ï¼š[æ ‘è“æ´¾æ˜¾ç¤ºå± 4B 7å¯¸ è¶…æ¸…è§¦æ‘¸å±](https://detail.tmall.com/item.htm?abbucket=11&id=599265218230&ns=1&spm=a21n57.1.0.0.60e3523ceNBalO)

#### 4.3.2 ç›®æ ‡æ£€æµ‹æ¨¡å‹

> ä¸Šä¸€èŠ‚è¯´äº†ç¡¬ä»¶é€‰å‹ï¼Œå®Œæˆä»¥åå°±å¯ä»¥å‡†å¤‡è½¯ä»¶æ–¹é¢äº†ã€‚

æœ€åçš„è§†è§‰æ–¹æ¡ˆæ˜¯[YOLOv5-Lite](https://github.com/ppogg/YOLOv5-Lite) + [onnx](https://github.com/onnx/models)æ¨ç†åŠ é€Ÿ

#### 4.3.3 è®­ç»ƒç¯å¢ƒæ­å»ºï¼ˆæœ‰ä¿®æ”¹ï¼‰

> è§£é‡Šä¸€ä¸‹ï¼Œyoloæ˜¯ä¸€ç§ç›®æ ‡æ£€æµ‹æ¨¡å‹ï¼Œæœ‰å¾ˆå¤šç‰ˆæœ¬ï¼Œyolov5æ˜¯ä»–çš„ä¸€ä¸ªå®˜æ–¹ç‰ˆæœ¬ï¼Œè€Œyolov5-liteæ˜¯ç”±ä¸€ä½å¤§ä½¬æ”¹è‰¯åçš„ä¸€ç§æ›´è½»é‡çº§æ¨¡å‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦è½»é‡çº§å‘¢ï¼Œå› ä¸ºå¤ªå¤§çš„æ¨¡å‹è®¡ç®—é‡å¤§ï¼Œæ ‘è“æ´¾å¸¦ä¸åŠ¨ï¼Œç®—åŠ›ä¸å¤Ÿï¼Œå°±ä¼šå¯¼è‡´è§†é¢‘ç”»é¢å¾ˆå¡ï¼Œæ£€æµ‹é€Ÿåº¦ä¹Ÿæ…¢ã€‚**æœ¬è´¨ä¸Šyolov5å’Œyolov5-liteä½¿ç”¨æ–¹å¼æ˜¯ä¸€æ ·çš„ã€‚**

å®Œæ•´çš„è§†é¢‘æ•™ç¨‹ï¼Œæ­å»ºyolov5-liteæ¨¡å‹è®­ç»ƒç¯å¢ƒï¼š[æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„yolov5ç›®æ ‡æ£€æµ‹å¹³å°](https://www.bilibili.com/video/BV1f44y187Xg/)

å®Œæ•´çš„åšå®¢æ–‡æ¡£ï¼š[ç›®æ ‡æ£€æµ‹--æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè‡ªå·±çš„YOLOv5ç›®æ ‡æ£€æµ‹å¹³å°_ç‚®å“¥å¸¦ä½ å­¦çš„åšå®¢-CSDNåšå®¢](https://blog.csdn.net/didiaopao/category_11321656.html)

ä»¥ä¸Šæ•™ç¨‹è®¾è®¡åˆ°å†…å®¹åŒ…æ‹¬ï¼š

- æ­å»ºyolov5-liteè®­ç»ƒç¯å¢ƒã€‚
- æ•°æ®é›†çš„æ ‡æ³¨ã€‚
- è®­ç»ƒè‡ªå®šä¹‰æ•°æ®é›†ï¼Œå¯¼å‡ºptæ–‡ä»¶ã€‚

åœ¨`export.py`æ–‡ä»¶ç›®å½•ç»ˆç«¯å¯ä»¥è¿è¡Œä¸‹åˆ—ä»£ç **è¿›è¡Œæ¨¡å‹è½¬æ¢(.pt->.onnx)**ï¼š

> ç¬¬ä¸€ç‰ˆæ–‡æ¡£è¿™é‡Œæœ‰ä¸ªé”™è¯¯ï¼Œæ–‡å­—æè¿°é”™è¯¯ï¼Œä»¥æ­¤ç‰ˆä¸ºä¸»ã€‚

```shell
python export.py --weights best.pt
```

#### 4.3.4 æ ‘è“æ´¾ç¯å¢ƒæ­å»º

ç»è¿‡ä¸Šä¸€ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å°±å·²ç»æŠŠæˆ‘ä»¬çš„æ¨¡å‹è®­ç»ƒå®Œæˆï¼Œ**åç»­éœ€è¦**çš„æ˜¯é€šè¿‡ä»£ç è§£æè¿™ä¸ªptæ–‡ä»¶ï¼Œç„¶åé€šè¿‡å®ƒå»æ£€æµ‹æ‘„åƒå¤´ä¸€å¸§ä¸€å¸§çš„å›¾åƒæ•°æ®ï¼Œåˆ†ææˆ‘ä»¬ç›®æ ‡çš„ç§ç±»ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š

##### 1. é…ç½®æ ‘è“æ´¾ç¯å¢ƒ

[æ ‘è“æ´¾4bå®‰è£…yolov5å®ç°å®æ—¶ç›®æ ‡æ£€æµ‹_æ ‘è“æ´¾4bè·‘yolov5å¸§ç‡ä½-CSDNåšå®¢](https://blog.csdn.net/m0_55833308/article/details/122633544)ï¼Œè¿™ä¸ªå¥½åƒéœ€è¦ä¼šå‘˜çœ‹äº†

[åŸºäºæ ‘è“æ´¾4Bçš„YOLOv5-Liteç›®æ ‡æ£€æµ‹çš„ç§»æ¤ä¸éƒ¨ç½²ï¼ˆå«è®­ç»ƒæ•™ç¨‹ï¼‰_æ ‘è“æ´¾yolo-CSDNåšå®¢](https://blog.csdn.net/black_sneak/article/details/131374492)

[æ ‘è“æ´¾-å¿«é€Ÿç›®æ ‡æ£€æµ‹yoloV5-liteè®­ç»ƒä¸ç§»æ¤_å“”å“©å“”å“©_bilibili](https://www.bilibili.com/video/BV14r4y1578r/?spm_id_from=333.337.search-card.all.click&vd_source=9360af603fa540663a17ba65dbad6a7d)

**ä»¥ä¸Šä»…ä½œå‚è€ƒï¼Œå› ä¸ºä»–ä»¬æœ‰äº›åº“å¯èƒ½å®‰è£…ä¸ä¸Šï¼Œä¸”æ¨ç†ä»£ç ç”±äº›è®¸BUGï¼Œå¤§å®¶æ ¹æ®æˆ‘çš„æµç¨‹å¹¶å‚è€ƒä»–ä»¬çš„ä¸€èµ·çœ‹ï¼Œæˆ‘ä¼šæŠŠæˆ‘ä¿®æ”¹è¿‡çš„æ¨ç†ä»£ç æ”¾åœ¨è¿™é‡Œã€‚**

> å…¶å®æœ¬æ¥ç”±å¾ˆå¤šèµ„æ–™ã€é•œåƒã€åº“æ–‡ä»¶æˆ‘ä¿å­˜å¥½äº†ï¼Œä½†æ˜¯æ¯”èµ›çš„æ—¶å€™æˆ‘æŠŠå­˜èµ„æ–™çš„Uç›˜ä¸¢äº†ï¼Œèµ„æ–™ä¹Ÿä¸¢äº†ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œæˆ‘æ–°ä¹°çš„Uç›˜è¿˜æ˜¯ğŸ˜£ğŸ˜£ğŸ˜£ã€‚ä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œæˆ‘æ‰‹æ•²ä¸€éè¿‡ç¨‹ï¼Œå†æ‰¾ä¸€éèµ„æ–™ã€‚

**æ ‘è“æ´¾å¼€æœºï¼Œå®ŒæˆåŸºç¡€é…ç½®ã€‚**

è¿™é‡Œæ˜¯æˆ‘è´­ä¹°æ ‘è“æ´¾è·å¾—çš„äºšåšæ™ºèƒ½çš„èµ„æ–™ï¼Œå…è´¹åˆ†ç»™å¤§å®¶ï¼š

é“¾æ¥ï¼šhttps://pan.baidu.com/s/1Jm9qrot5CN4mZSJJhASeXg?pwd=cmzz 
æå–ç ï¼šcmzz

å®Œæˆ**åŸºç¡€è®¾ç½®**éƒ¨åˆ†æ—¢å¯ã€‚éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯[**è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ç¨‹åº**](#4.3.5 è‡ªå¯åŠ¨ç¨‹åº)ï¼Œæ¯”èµ›è¦æ±‚ä¸€é”®å¯åŠ¨ï¼Œæ‰€ä»¥è¦åœ¨è‡ªå¯åŠ¨æ–‡ä»¶é‡Œé¢æŠŠæˆ‘ä»¬çš„ç¨‹åºå¯åŠ¨ã€‚

##### 2. yolov5-liteç§»æ¤

> ç”±äºæ‰‹è¾¹æ²¡æœ‰æ ‘è“æ´¾ï¼Œæ‰€ä»¥éƒ¨åˆ†å†…å®¹æˆ‘ç”¨è™šæ‹Ÿæœºæ¼”ç¤ºï¼Œå®é™…æ˜¯åŸºæœ¬ä¸€è‡´çš„ã€‚

1. **å…‹éš†yolov5-lite**

è®¿é—®Githubçš„yolov5-liteåœ°å€(è®°å¾—ä½¿ç”¨é­”æ³•)ï¼š[ä¸‹è½½YOLOv5-Lite](https://github.com/ppogg/YOLOv5-Lite)

![1708330842223](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708330842223.png)

**æ¨è**ç›´æ¥ä¸‹è½½å‹ç¼©åŒ…æŠŠå‹ç¼©åŒ…ä¼ åˆ°æ ‘è“æ´¾ï¼Œç›´æ¥å³é”®è§£å‹æˆ–**ç»ˆç«¯è§£å‹**ï¼Œå›¾ç¤ºçš„æ–‡ä»¶å°†éƒ½ä¼šå­˜åœ¨äºæ–‡ä»¶å¤¹ã€‚

```shell
unzip your_file.zip # è§£å‹
```

è§£å‹ä»¥åçš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹å›¾ï¼ŒYOLO-Lite-masteræ˜¯æ–‡ä»¶å¤¹åç§°ï¼Œåç»­å°±ç§°ä¹‹ä¸º**yolov5-liteæ–‡ä»¶å¤¹**

![1708343507323](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708343507323.png)

è§£é‡Šä¸€ä¸‹**æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯**ï¼Œä¾‹å¦‚ï¼šåœ¨**yolov5-liteæ–‡ä»¶å¤¹**ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œå³ç»ˆç«¯ä½ç½®åœ¨**yolov5-liteæ–‡ä»¶å¤¹**ä½ç½®ã€‚

![1708343830872](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708343830872.png)

æ“ä½œæ–¹æ³•ä¸ºé»˜è®¤ç»ˆç«¯è¾“å…¥`cd + your_path`ï¼Œä¾‹å¦‚ï¼š

![1708343950823](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708343950823.png)

> å¯ä»¥æ•²å‰å‡ ä¸ªå­—æ¯ï¼Œç”¨Tabé”®è¡¥é½ã€‚**åç»­ä¼šç›´æ¥è¯´åœ¨æŸä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œæ‰¾åˆ°è·¯å¾„è‡ªè¡Œæ“ä½œã€‚**

2. **å®‰è£…pytorch**

å®‰è£…ä¾èµ–

```shell
sudo apt-get install libopenblas-dev libblas-dev m4 cmake cython python3-dev python3-yaml python3-setuptools python3-wheel python3-pillow python3-numpy
```

åœ¨æˆ‘çš„èµ„æ–™åŒ…æ‰¾åˆ°pytorchå®‰è£…åŒ…ï¼Œé€šè¿‡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹**WinSCP**ä¼ è¾“åˆ°æ ‘è“æ´¾(4ä¸ªæ–‡ä»¶éƒ½ä¼ è¾“ï¼Œåé¢éƒ½è¦æœ‰)ï¼Œåœ¨**pytorchå®‰è£…æ–‡ä»¶çš„ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯**ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…pytorchï¼š

```shell
pip3 install torch-1.8.0a0+56b43f4-cp37-cp37m-linux_armv7l.whl
pip3 install torchvision-0.9.0a0+8fb5838-cp37-cp37m-linux_armv7l.whl
```

![1708332404336](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708332404336.png)

![1708329910522](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708329910522.png)

3. **å®‰è£…ä¾èµ–**

**yolov5-liteæ–‡ä»¶å¤¹**ä¸‹æ‰¾åˆ°**requirements.txt**ï¼Œè¿™é‡Œæ˜¯éœ€è¦å®‰è£…çš„åº“çš„ç‰ˆæœ¬ï¼ŒæŠŠæˆ‘ä»¬å·²ç»å®‰è£…è¿‡çš„torchå’Œtorchvisionæ³¨é‡Šæ‰ï¼Œç„¶å**æ–‡ä»¶å¤¹ä¸‹æ‰“å¼€ç»ˆç«¯**æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š

```shell
pip3 install -r requirements.txt
```

![1708331536097](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708331536097.png)

å°†**v5lite-s.pt**æ–‡ä»¶è½¬ç§»åˆ°æ ‘è“æ´¾ä¸‹**yolov5-liteæ–‡ä»¶å¤¹**ä¸‹

![1708332518118](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708332518118.png)

4. **æ‘„åƒå¤´é…ç½®**

æ£€æµ‹æ ‘è“æ´¾æ˜¯å¦æœ‰**opencv**ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥`python3`è°ƒå‡ºpythonç»ˆç«¯ï¼Œè¾“å…¥`import cv2`ä¸æŠ¥é”™å³å¯

![1708330217813](./https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708330217813.png)

æ–°å»ºPyProjectsæ–‡ä»¶å¤¹ï¼Œæ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ–‡ä»¶cv_test.py

```shell
mkdir PyProjects
cd PyProjects
touch cv_test.py
```

![1708344562343](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708344562343.png)

å¤åˆ¶ä¸‹é¢ä»£ç åˆ°cv_test.pyæ–‡ä»¶ã€‚

```python
import cv2

# åˆ›å»ºæ‘„åƒå¤´å¯¹è±¡
cap = cv2.VideoCapture(-1)  # 0 è¡¨ç¤ºé»˜è®¤æ‘„åƒå¤´ï¼Œå¦‚æœæœ‰å¤šä¸ªæ‘„åƒå¤´ï¼Œå¯ä»¥å°è¯•ä¸åŒçš„ç¼–å·

# æ£€æŸ¥æ‘„åƒå¤´æ˜¯å¦æˆåŠŸæ‰“å¼€
if not cap.isOpened():
    print("æ— æ³•æ‰“å¼€æ‘„åƒå¤´")
    exit()

# è®¾ç½®æ‘„åƒå¤´åˆ†è¾¨ç‡ï¼ˆå¯é€‰ï¼‰
# cap.set(cv2.CAP_PROP_FRAME_WIDTH, 640)
# cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)

while True:
    # ä»æ‘„åƒå¤´è¯»å–ä¸€å¸§å›¾åƒ
    ret, frame = cap.read()

    # æ£€æŸ¥å¸§æ˜¯å¦æˆåŠŸè¯»å–
    if not ret:
        print("æ— æ³•è¯»å–å¸§")
        break

    # åœ¨çª—å£ä¸­æ˜¾ç¤ºå›¾åƒ
    cv2.imshow('æ‘„åƒå¤´æµ‹è¯•', frame)

    # æŒ‰ä¸‹ 'q' é”®é€€å‡ºå¾ªç¯
    if cv2.waitKey(1) & 0xFF == ord('q'):
        break

# é‡Šæ”¾æ‘„åƒå¤´èµ„æº
cap.release()

# å…³é—­æ‰€æœ‰çª—å£
cv2.destroyAllWindows()
```

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»£ç ï¼Œå¯ä»¥çœ‹åˆ°æ‘„åƒå¤´ç”»é¢åˆ™æ²¡æœ‰é—®é¢˜ã€‚

```shell
python3 cv_test.py
```

![1708344698894](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708344698894.png)

Ctrl+cé€€å‡ºï¼Œè¾“å…¥`ls /dev/video*`æŸ¥çœ‹æ‘„åƒå¤´è®¾å¤‡ï¼Œä¸€èˆ¬æ˜¯0/1

![1708334429106](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708334429106.png)

5. **æ¨ç†**

yolov5-liteçš„æ ¹ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç»ˆç«¯å°è¯•æ¨ç†ï¼š

```
python3 detect.py --source 0
```

> source 0ä¸è¡Œå¯ä»¥è¯•è¯•source 1ï¼Œå–å†³äºæ‘„åƒå¤´è®¾å¤‡ã€‚

##### 3. onnxæ¨ç†

**å®‰è£…onnxruntime**

åœ¨æˆ‘çš„èµ„æ–™åŒ…é‡Œï¼Œ**onnxæ¨ç†**æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ªonnxruntimeåº“çš„å®‰è£…æ–‡ä»¶ï¼Œé€šè¿‡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹WinSCPä¼ è¾“åˆ°æ ‘è“æ´¾ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤å®‰è£…ï¼š

```shell
pip3 install onnxruntime-1.9.1-cp37-none-linux_armv7l.whl
```

æ³¨æ„ï¼šonnxruntimeçš„å®‰è£…éœ€è¦python3.7 å’Œ numpy 1.21ä»¥ä¸Š

```shell
pip3 install numpy # å®‰è£…numpy
```

![1708333928679](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708333928679.png)

**onnxæ¨ç†**

æ–°å»ºæ–‡ä»¶yolo.pyï¼Œ`python3 yolo.py`è¿è¡Œå³å¯ã€‚

```python
import random

import cv2
import numpy as np
import onnxruntime as ort
import time


def plot_one_box(x, img, color=None, label=None, line_thickness=None):
    """
    description: Plots one bounding box on image img,
                 this function comes from YoLov5 project.
    param: 
        x:      a box likes [x1,y1,x2,y2]
        img:    a opencv image object
        color:  color to draw rectangle, such as (0,255,0)
        label:  str
        line_thickness: int
    return:
        no return
    """
    tl = (
            line_thickness or round(0.002 * (img.shape[0] + img.shape[1]) / 2) + 1
    )  # line/font thickness
    color = color or [random.randint(0, 255) for _ in range(3)]
    x = x.squeeze()
    c1, c2 = (int(x[0]), int(x[1])), (int(x[2]), int(x[3]))
    cv2.rectangle(img, c1, c2, color, thickness=tl, lineType=cv2.LINE_AA)
    if label:
        tf = max(tl - 1, 1)  # font thickness
        t_size = cv2.getTextSize(label, 0, fontScale=tl / 3, thickness=tf)[0]
        c2 = c1[0] + t_size[0], c1[1] - t_size[1] - 3
        cv2.rectangle(img, c1, c2, color, -1, cv2.LINE_AA)  # filled
        cv2.putText(
            img,
            label,
            (c1[0], c1[1] - 2),
            0,
            tl / 3,
            [225, 255, 255],
            thickness=tf,
            lineType=cv2.LINE_AA,
        )


def _make_grid(nx, ny):
    xv, yv = np.meshgrid(np.arange(ny), np.arange(nx))
    return np.stack((xv, yv), 2).reshape((-1, 2)).astype(np.float32)


def cal_outputs(outs, nl, na, model_w, model_h, anchor_grid, stride):
    row_ind = 0
    grid = [np.zeros(1)] * nl
    for i in range(nl):
        h, w = int(model_w / stride[i]), int(model_h / stride[i])
        length = int(na * h * w)
        if grid[i].shape[2:4] != (h, w):
            grid[i] = _make_grid(w, h)

        outs[row_ind:row_ind + length, 0:2] = (outs[row_ind:row_ind + length, 0:2] * 2. - 0.5 + np.tile(
            grid[i], (na, 1))) * int(stride[i])
        outs[row_ind:row_ind + length, 2:4] = (outs[row_ind:row_ind + length, 2:4] * 2) ** 2 * np.repeat(
            anchor_grid[i], h * w, axis=0)
        row_ind += length
    return outs


def post_process_opencv(outputs, model_h, model_w, img_h, img_w, thred_nms, thred_cond):
    conf = outputs[:, 4].tolist()
    c_x = outputs[:, 0] / model_w * img_w
    c_y = outputs[:, 1] / model_h * img_h
    w = outputs[:, 2] / model_w * img_w
    h = outputs[:, 3] / model_h * img_h
    p_cls = outputs[:, 5:]
    if len(p_cls.shape) == 1:
        p_cls = np.expand_dims(p_cls, 1)
    cls_id = np.argmax(p_cls, axis=1)

    p_x1 = np.expand_dims(c_x - w / 2, -1)
    p_y1 = np.expand_dims(c_y - h / 2, -1)
    p_x2 = np.expand_dims(c_x + w / 2, -1)
    p_y2 = np.expand_dims(c_y + h / 2, -1)
    areas = np.concatenate((p_x1, p_y1, p_x2, p_y2), axis=-1)

    areas = areas.tolist()
    ids = cv2.dnn.NMSBoxes(areas, conf, thred_cond, thred_nms)
    if len(ids) > 0:
        return np.array(areas)[ids], np.array(conf)[ids], cls_id[ids]
    else:
        return [], [], []


def infer_img(img0, net, model_h, model_w, nl, na, stride, anchor_grid, thred_nms=0.4, thred_cond=0.5):
    # å›¾åƒé¢„å¤„ç†
    img = cv2.resize(img0, (model_w, model_h), interpolation=cv2.INTER_AREA)
    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
    img = img.astype(np.float32) / 255.0
    blob = np.expand_dims(np.transpose(img, (2, 0, 1)), axis=0)

    # æ¨¡å‹æ¨ç†
    outs = net.run(None, {net.get_inputs()[0].name: blob})[0].squeeze(axis=0)

    # è¾“å‡ºåæ ‡çŸ«æ­£
    outs = cal_outputs(outs, nl, na, model_w, model_h, anchor_grid, stride)

    # æ£€æµ‹æ¡†è®¡ç®—
    img_h, img_w, _ = np.shape(img0)
    boxes, confs, ids = post_process_opencv(outs, model_h, model_w, img_h, img_w, thred_nms, thred_cond)

    return boxes, confs, ids


# å¾—åˆ°ä¸­å¿ƒåæ ‡
def get_centre(x_list):
    c_x = (x_list[0] + x_list[2]) / 2
    c_y = (x_list[1] + x_list[3]) / 2
    # c_x = c_x*np.cos(np.radians(45))-c_y*np.sin(np.radians(45))
    # c_y = c_y*np.cos(np.radians(45))+c_x*np.sin(np.radians(45))
    c_list = [c_x, c_y]
    # è¿”å›ä¸­å¿ƒåæ ‡åˆ—è¡¨
    return c_list


# å¾—åˆ°é¢ç§¯
def get_area(label_list):
    length = label_list[2] - label_list[0]
    height = label_list[3] - label_list[1]
    area = []
    # é¢ç§¯
    area.append(length * height)
    area.append(length/height)
    return area


# å¾—åˆ°æœ€å¤§é¢ç§¯çš„åæ ‡
def get_data(c_list, ids_, scores_):

    # è·å–åæ ‡è¯†åˆ«æ ‡ç­¾ä¸ªæ•°
    coordinate_length = len(c_list)
    # ä¸­å¿ƒåæ ‡åˆ—è¡¨
    centre_list = []
    area_list = []
    l_h_list = []
    # åˆ†åˆ«è¯»å–æ¯ä¸ªæ ‡ç­¾çš„æ•°æ®
    for i in range(int(coordinate_length)):
        # è·å–æ¯ä¸ªæ ‡ç­¾çš„åæ ‡åˆ—è¡¨
        coordinate = c_list[i]
        # è·å–é¢ç§¯å’Œé•¿å®½æ¯”
        area, l_h = get_area(coordinate)
        # ä¸­å¿ƒç‚¹åæ ‡åˆ—è¡¨
        centre_list.append(get_centre(coordinate))
        # é¢ç§¯åˆ—è¡¨
        area_list.append(area)
        # è·å–é•¿å®½æ¯”()
        l_h_list.append(l_h)
    if area_list:
        max_area = max(area_list)
        # è¯»å–é¢ç§¯æœ€å¤§çš„æ ‡ç­¾çš„ ç´¢å¼•
        area_index = area_list.index(max_area)
        # æ ¹æ®ç´¢å¼•è·å–é¢ç§¯æœ€å¤§çš„æ ‡ç­¾çš„æ•°æ®
        target = centre_list[area_index]
        label = dic_labels[ids_[area_index]]
        score = scores_[area_index]
        box = c_list[area_index]
        l_h = l_h_list[area_index]
        return box, target, label, score, l_h, len(area_list)
    else:
        return None, None, None, None, None, None


if __name__ == "__main__":

    # æ¨¡å‹åŠ è½½
    model_pb_path = "FINAL.onnx"
    so = ort.SessionOptions()
    net = ort.InferenceSession(model_pb_path, so)

    # æ ‡ç­¾å­—å…¸
    dic_labels = {
        0: '0-plastic_bottle',
        1: '0-drink_can',
        2: '0-paper',
        3: '0-carton',
        4: '0-milkCarton',
        5: '1-pericarp',
        6: '1-vegetable_leaf',
        7: '1-radish',
        8: '1-potato',
        9: '1-fruits',
        10: '2-battery',
        11: '2-Expired_drug',
        12: '2-button cell',
        13: '2-thermometer',
        14: '3-tile',
        15: '3-cobblestone',
        16: '3-brick',
        17: '3-paperCup',
        18: '3-tableware',
        19: '3-chopsticks',
        20: '3-butt',
        21: '3-mask'

    }

    # æ¨¡å‹å‚æ•°
    model_h = 320
    model_w = 320
    nl = 3
    na = 3
    stride = [8., 16., 32.]
    anchors = [[10, 13, 16, 30, 33, 23], [30, 61, 62, 45, 59, 119], [116, 90, 156, 198, 373, 326]]
    anchor_grid = np.asarray(anchors, dtype=np.float32).reshape(nl, -1, 2)

    video = 1
    cap = cv2.VideoCapture(video)
    flag_det = True  # åˆå§‹åŒ–è®¾ä¸ºFalseï¼Œæ”¶åˆ°ä¿¡å·åˆ™å˜ä¸ºTrue
    while True:
        success, img0 = cap.read()
        # å–æ„Ÿå…´è¶£åŒºåŸŸ
        # img0 = img0[20:220, 30: 290]

        if success:

            if flag_det:
                t1 = time.time()
                det_boxes, scores, ids = infer_img(img0, net, model_h, model_w, nl, na, stride, anchor_grid,
                                                   thred_nms=0.4, thred_cond=0.5)
                time.sleep(0.02)
                t2 = time.time()
                # print(det_boxes)
                # print(ids)
                print("-"*100)
                box, target, label, score, l_h, lens = get_data(det_boxes, ids, scores)
                print(f"box:{box}\ntarget:{target}\nlabel:{label}\nscore:{score}\n L-h:{l_h}\nlongs:{lens}")
                print("-" * 100)
                str_FPS = f"FPS: {(1 / (t2 - t1)):.2f}"
                if label:
                    label = f"{label}:{score:.2f}"
                    plot_one_box(box.astype(np.int16), img0, color=(255, 0, 0), label=label, line_thickness=1)
                    cv2.putText(img0, "str_FPS", (20, 20), cv2.FONT_HERSHEY_COMPLEX, 0.5, (0, 255, 0), 1)


            cv2.imshow("video", img0)
        key = cv2.waitKey(1) & 0xFF
        if key == ord('q'):
            break

    cap.release()

```

![1708345128636](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708345128636.png)

> å¦‚æœå¯ä»¥æ­£å¸¸è¯†åˆ«æ£€æµ‹ç›®æ ‡ï¼Œç¯å¢ƒæ­å»ºå°±æ²¡æœ‰é—®é¢˜ï¼Œåç»­æ ¹æ®æ¯”èµ›è¦æ±‚æ·»åŠ é€šä¿¡ä»£ç å°±å¯ä»¥äº†ã€‚

#### 4.3.5 è‡ªå¯åŠ¨ç¨‹åº

æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥`sudo nano /etc/rc.local`ï¼Œä¿®æ”¹ä»£ç ä¸ºä¸€ä¸‹å½¢å¼ï¼Œå…¶ä¸­`#my codes`ä¸ºä¸»è¦æ·»åŠ ä»£ç ï¼Œ`autoboot.sh`ä¸ºå¯åŠ¨ç¨‹åºæ–‡ä»¶ï¼Œè‡ªå·±å‘½åå³å¯ã€‚

![1708946094611](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708946094611.png)

æ ¹æ®ç›®å½•åˆ›å»º`autoboot.sh`æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ä¸‹å†…å®¹

```shell
#!/bin/bash

export DISPLAY=:0
startx

# æ—¥å¿—
exec &>> /home/pi/logfile.log
echo "Script started at: $(date)"

# å¸‚èµ›
python3 /home/pi/Py_Projects/Municipal_contest.py
# åˆèµ›
# python3 /home/pi/Py_Projects/preliminary_contest.py
```

å…¶ä¸­`#!/bin/bash`ä¸ºå¿…é¡»å†…å®¹ï¼Œ`export DISPLAY=:0	startx`æ˜¯æˆ‘æ‘¸ç´¢å¾ˆä¹…ï¼Œå¯ä»¥å®ç°QTç•Œé¢å¼€æœºæ˜¾ç¤ºçš„å¿…é¡»å†…å®¹ï¼Œå¦åˆ™å¼€æœºQTç•Œé¢æ— æ³•æ­£å¸¸æ˜¾ç¤ºã€‚æ—¥å¿—éƒ¨åˆ†å»ºè®®å¡«å†™ï¼Œæ–¹ä¾¿å¼€æœºè‡ªå¯å‡ºé—®é¢˜æ‰¾åŸå› ï¼Œè¾“å‡ºçš„æ—¥å¿—ä¼šåœ¨`/home/pi/logfile.log`ç›®å½•ä¸‹ã€‚`python3 /home/pi/Py_Projects/Municipal_contest.py`ä¸ºéœ€è¦è¿è¡Œçš„ä»£ç ã€‚

### 4.4 æ˜¾ç¤ºå±ç•Œé¢è®¾è®¡

> æ²¡ä»€ä¹ˆå¯è®²çš„ï¼Œè‡ªå·±å»å­¦ä¸€å­¦pyqt5ï¼Œç®€å•è®¾è®¡ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚

#### 4.4.1 pythonç¯å¢ƒæ­å»º(windows)

Pythonç¯å¢ƒé…ç½®ï¼š

é“¾æ¥ï¼šhttps://pan.baidu.com/s/1WBBtduC-grJw9ZM88HqXfg?pwd=cmzz 
æå–ç ï¼šcmzz

![1708503608585](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708503608585.png)

PyQt5ç¯å¢ƒé…ç½®ï¼š[ç•Œé¢å¼€å‘ï¼ˆ1ï¼‰ --- PyQt5ç¯å¢ƒé…ç½®_pyqt5 é…ç½®-CSDNåšå®¢](https://blog.csdn.net/WYKB_Mr_Q/article/details/129265121)

QTå­¦ä¹ ï¼š[Python Qt ç®€ä»‹ | ç™½æœˆé»‘ç¾½ (byhy.net)](https://www.byhy.net/tut/py/gui/qt_01/)

ç•Œé¢è®¾è®¡ä¸»è¦éœ€è¦æ³¨æ„çš„å‘¢å°±ä¸¤ç‚¹ï¼š

1. æ˜¯å¦æ˜¾ç¤ºæ‘„åƒå¤´ç”»é¢ï¼Œæˆ‘é€‰æ‹©æ˜¯æ˜¾ç¤ºï¼Œå› ä¸ºæˆ‘çœ‹åˆ°ç”»é¢å®‰å¿ƒä¸€äº›ï¼Œä¹ŸçŸ¥é“å“ªäº›æ£€æµ‹é”™äº†å†å»ä¼˜åŒ–æ•°æ®é›†ã€‚æˆ‘ç”¨çš„å°±æ˜¯ä¸€å¸§ä¸€å¸§çš„å›¾åƒï¼Œä»¥ç…§ç‰‡çš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ã€‚(QImageï¼‰
2. è§†é¢‘çš„æ’­æ”¾ï¼Œä¸€å¼€å§‹ç”¨çš„Pyqt5çš„playerç»„ä»¶ï¼Œä½†æ˜¯ç§»æ¤åˆ°æ ‘è“æ´¾ä¼šä¸€ç›´æŠ¥é”™ï¼Œå¹¶ä¸”ä¼šå¯¼è‡´åˆ†è§£æ ‘è“æ´¾ç®—åŠ›ä½¿ç”¨ï¼Œå¯¼è‡´ç›®æ ‡æ£€æµ‹æ¨ç†æ›´æ…¢ã€‚åæ¥é€‰ç”¨äº†æ ‘è“æ´¾çš„ä¸€ä¸ªæ’­æ”¾è½¯ä»¶omxplayerï¼Œå®‰è£…ä»–çš„pythonåº“ï¼Œç”¨ä»£ç æ§åˆ¶æ’­æ”¾ã€‚

#### 4.4.2 ä»£ç æ ¼å¼

è¿™æ˜¯ä¸€ä¸ª**ç¬¬ä¸€ç‰ˆç•Œé¢è®¾è®¡**ï¼Œæ²¡æœ‰åŠ ä¸²å£é€šä¿¡ã€è§†é¢‘ã€ç›®æ ‡æ£€æµ‹ã€‚

```python
from pathlib import Path
from threading import Thread
from PyQt5.QtCore import Qt
from PyQt5.QtMultimediaWidgets import QVideoWidget
from PyQt5.QtWidgets import *
from PyQt5.QtGui import QIcon, QPixmap, QFont
from PyQt5.QtMultimedia import QMediaPlayer, QMediaPlaylist, QMediaContent
from PyQt5.Qt import QUrl
import sys
import time


def is_mp4(file_path):
    # ä½¿ç”¨Pathç±»åˆ›å»ºæ–‡ä»¶è·¯å¾„å¯¹è±¡
    path = Path(file_path)

    # æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
    if not path.exists():
        return False

    # æ£€æŸ¥æ–‡ä»¶æ‰©å±•åæ˜¯å¦ä¸º.mp4
    if path.suffix.lower() == '.mp4':
        return True
    return False


class Demo:
    def __init__(self):

        """æ§ä»¶åˆå§‹åŒ–"""
        self.ui = QMainWindow()
        # self.player = QMediaPlayer(self.ui)
        self.label = QLabel(self.ui)
        self.map_label = QLabel(self.ui)
        self.map2_label = QLabel(self.ui)
        # self.playlist = QMediaPlaylist(self.ui)
        # self.video_widget = QVideoWidget(self.ui)

        # self.slider = QSlider(Qt.Horizontal, self.ui)
        self.video_button = QPushButton("é€‰æ‹©è§†é¢‘æ–‡ä»¶", self.ui)
        self.map_button = QPushButton("é€‰æ‹©å›¾ç‰‡æ–‡ä»¶", self.ui)

        # self.textLabel = QLabel(self.ui)
        self.list = QListWidget(self.ui)
        # åˆ›å»ºè¡¨æ ¼
        rows = 4  # è¡Œ
        columns = 2  # åˆ—
        self.table = QTableWidget(rows, columns, self.ui)
        thread_text = Thread(
            target=self.Text_time
        )
        # å±æ€§åˆå§‹åŒ–å‡½æ•°è°ƒç”¨
        self.LayoutInit()
        self.WidgetInit()
        self.tabel_items()
        self.add_list_items()
        # self.Player()
        self.Signal()
        thread_text.start()

    # è§†é¢‘æ’­æ”¾å‡½æ•°
    # def Player(self):
    #     self.player.setVideoOutput(self.video_widget)  # è®¾ç½®è§†é¢‘è¾“å‡º
    #     self.player.setPlaylist(self.playlist)
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile("bak.mp4")))
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile("lajifenlei.mp4")))
    #     self.playlist.setPlaybackMode(QMediaPlaylist.Loop)
    #
    #     self.player.setVolume(50)
    #
    #     self.player.play()

    # Layoutç•Œé¢
    def LayoutInit(self):
        central_widget = QWidget(self.ui)
        self.ui.setCentralWidget(central_widget)
        layout_v = QVBoxLayout(central_widget)
        layout_h = QHBoxLayout(central_widget)
        layout_h2 = QHBoxLayout(central_widget)
        layout_h3 = QHBoxLayout(central_widget)

        layout_h.addWidget(self.label)
        layout_h.addWidget(self.video_button)
        layout_h.addWidget(self.map_button)
        layout_h.setStretch(0, 5)
        layout_h.setStretch(1, 1)
        layout_h.setStretch(2, 1)
        layout_h.setSpacing(170)

        layout_h2.addWidget(self.map2_label)
        layout_h2.addWidget(self.map_label)
        layout_h2.setStretch(0, 5)
        layout_h2.setStretch(1, 5)
        layout_h2.setSpacing(0)

        layout_h3.addWidget(self.table)
        layout_h3.addWidget(self.list)
        layout_h3.setStretch(0, 1)
        layout_h3.setStretch(1, 3)
        layout_h3.setSpacing(50)

        layout_v.addLayout(layout_h)
        layout_v.addLayout(layout_h2)
        # layout_v.addWidget(self.slider)
        layout_v.addLayout(layout_h3)
        layout_v.setStretch(0, 1)
        layout_v.setStretch(1, 5)
        layout_v.setStretch(2, 1)
        layout_v.setStretch(3, 3)

        self.ui.setLayout(layout_v)



    def Text_time(self):
        while True:
            text = "â¤â¤â¤â¤â¤åœ°çƒç¯ä¿å«å£«â¤â¤â¤â¤â¤"
            for i in range(108):
                self.label.setText(text)
                time.sleep(0.1)
                text = ' ' + text


    def tabel_items(self):
        font_tabel = self.table.font()
        font_tabel.setPointSize(20)
        self.table.setFont(font_tabel)
        self.item1 = QTableWidgetItem("å¯å›æ”¶åƒåœ¾")
        self.table.setItem(0, 0, self.item1)
        self.item2 = QTableWidgetItem("æœ‰å®³åƒåœ¾")
        self.table.setItem(1, 0, self.item2)
        self.item3 = QTableWidgetItem("å¨ä½™åƒåœ¾")
        self.table.setItem(2, 0, self.item3)
        self.item4 = QTableWidgetItem("å…¶ä»–åƒåœ¾")
        self.table.setItem(3, 0, self.item4)
        self.item5 = QTableWidgetItem("æœªæ»¡è½½")
        self.item6 = QTableWidgetItem("æœªæ»¡è½½")
        self.item7 = QTableWidgetItem("æœªæ»¡è½½")
        self.item8 = QTableWidgetItem("æœªæ»¡è½½")
        self.table.setItem(0, 1, self.item5)
        self.table.setItem(1, 1, self.item6)
        self.table.setItem(2, 1, self.item7)
        self.table.setItem(3, 1, self.item8)

    def add_list_items(self):
        for i in range(10):
            print(self.list.count())
            news = QListWidgetItem("å¯å›æ”¶åƒåœ¾")
            self.list.addItem(news)
            self.list.scrollToItem(news, QListWidget.PositionAtBottom)

    # æ§ä»¶åˆå§‹åŒ–
    def WidgetInit(self):
        self.ui.setWindowTitle("æ’­æ”¾è§†é¢‘")
        self.ui.resize(177 * 4, 400)
        self.label.setFrameStyle(QFrame.Panel | QFrame.Sunken)
        self.table.setShowGrid(False)  # æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼
        self.table.setHorizontalHeaderLabels(["ç±»åˆ«", "æ˜¯å¦æ»¡è½½"])
        self.table.horizontalHeader().setSectionResizeMode(QHeaderView.Stretch)
        font_list = self.list.font()
        font_list.setPointSize(18)
        self.list.setFont(font_list)
        # self.label.setAlignment(Qt.AlignCenter)
        map_widget = QPixmap("../../pictures/bu2.jpg")
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)

    # ä¿¡å·æ§½å‡½æ•°åˆå§‹åŒ–
    def Signal(self):
        # self.slider.sliderMoved.connect(self.GetMoved)
        # self.player.durationChanged.connect(self.GetDuration)
        # self.player.positionChanged.connect(self.GetPosition)
        self.video_button.clicked.connect(self.GetMap2)
        self.map_button.clicked.connect(self.GetMap)

    # æ§½å‡½æ•°
    # def GetDuration(self, d):
    #     if d:
    #         self.slider.setRange(0, d)
    #         seconds = int(d / 1000)
    #         minutes = int(seconds / 60)
    #         seconds -= minutes * 60
    #         # self.label.setText(f"æ€»æ—¶é•¿ï¼š{minutes}:{seconds}")
    #         print(f"æ€»æ—¶é•¿ï¼š{minutes}:{seconds}")

    # def GetPosition(self, time):
    #     if time:
    #         self.slider.setValue(time)
    #
    # def GetMoved(self, time):
    #     self.player.setPosition(time)

    # def GetFiles(self):
    #     video = QFileDialog()
    #     url = video.getOpenFileUrl()[0].toLocalFile()
    #     self.playlist.addMedia(QMediaContent(QUrl.fromLocalFile(url)))
    #     if is_mp4(url):
    #         num = self.playlist.mediaCount()
    #         for i in range(num):
    #             files = []
    #             file = self.playlist.media(i).canonicalUrl().toString()
    #             files.append(file)
    #             print(files)
    #
    #         self.playlist.setCurrentIndex(num - 1)
    #     else:
    #         QMessageBox.warning(self.ui, "è­¦å‘Š", "æ‰€é€‰æ•°æ®ç±»å‹ä¸æ˜¯'.MP4ï¼'", QMessageBox.Yes | QMessageBox.No)

    def GetMap2(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map2_label.setPixmap(map_widget)
        self.map2_label.setScaledContents(True)

    def GetMap(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)


if __name__ == "__main__":
    while 1:
        app = QApplication(sys.argv)
        app.setWindowIcon(QIcon("../ico/social-gears.ico"))
        bar = Demo()

        bar.ui.show()
        bar.ui.showFullScreen()
        sys.exit(app.exec_())

```

**è¿™é‡Œä¸æ¨èæˆ‘è¿™ç§ä»£ç æ ¼å¼ï¼Œä¿®æ”¹èµ·æ¥å¾ˆéº»çƒ¦ï¼Œåˆ°åé¢å‡ ç™¾å·çš„ä»£ç åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä¿®æ”¹èµ·æ¥å¾ˆä¸æ–¹ä¾¿ã€‚**æ¨èçš„æ–¹å¼æ˜¯æ¯ä¸€ä¸ªåŠŸèƒ½å•ç‹¬ä¸€ä¸ªpythonæ–‡ä»¶ï¼Œå»ºç«‹ä¸€ç³»åˆ—çš„å‡½æ•°åº“ï¼Œæœ€åå†™ä¸€ä¸ªå•ç‹¬çš„è°ƒç”¨æ–‡ä»¶ï¼›å½“æŸä¸ªåŠŸèƒ½å‡ºé—®é¢˜ä»¥åå°±å¯ä»¥åœ¨å…¶æ–‡ä»¶é‡Œä¿®æ”¹ï¼Œä»£ç é‡å°‘ï¼Œä¸”æ›´ç›´è§‚ã€‚

ä¸‹é¢å±•ç¤ºä¸€ä¸‹æˆ‘åé¢å†™çš„ä¸€ä¸ªç²—ç³™ç‰ˆQTç™»å½•ç•Œé¢ï¼Œå±•ç¤ºä¸€ä¸‹å‡½æ•°åº“è¿ç”¨ï¼š

![1708947182342](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708947182342.png)

**å‡½æ•°åº“ï¼š**

`demoUI.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'demoUI.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(640, 480)
        self.resign = QtWidgets.QPushButton(Form)
        self.resign.setGeometry(QtCore.QRect(210, 230, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.resign.setFont(font)
        self.resign.setObjectName("resign")
        self.forget = QtWidgets.QPushButton(Form)
        self.forget.setGeometry(QtCore.QRect(340, 230, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(11)
        self.forget.setFont(font)
        self.forget.setObjectName("forget")
        self.label_username = QtWidgets.QLabel(Form)
        self.label_username.setGeometry(QtCore.QRect(210, 120, 72, 30))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_username.setFont(font)
        self.label_username.setObjectName("label_username")
        self.label_passwd = QtWidgets.QLabel(Form)
        self.label_passwd.setGeometry(QtCore.QRect(230, 160, 72, 30))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.label_passwd.setFont(font)
        self.label_passwd.setTabletTracking(False)
        self.label_passwd.setObjectName("label_passwd")
        self.UserName = QtWidgets.QLineEdit(Form)
        self.UserName.setGeometry(QtCore.QRect(290, 120, 141, 31))
        self.UserName.setObjectName("UserName")
        self.Passwd = QtWidgets.QLineEdit(Form)
        self.Passwd.setGeometry(QtCore.QRect(290, 160, 141, 31))
        self.Passwd.setObjectName("Passwd")
        self.Inter = QtWidgets.QPushButton(Form)
        self.Inter.setGeometry(QtCore.QRect(270, 290, 91, 41))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.Inter.setFont(font)
        self.Inter.setStyleSheet("background-color: rgb(0, 85, 255);")
        self.Inter.setObjectName("Inter")
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(220, 30, 201, 51))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.label.setFont(font)
        self.label.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.label.setObjectName("label")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "äººæœºäº¤äº’ç•Œé¢"))
        self.resign.setText(_translate("Form", "æ³¨å†Œè´¦å·"))
        self.forget.setText(_translate("Form", "å¿˜è®°å¯†ç "))
        self.label_username.setText(_translate("Form", "ç”¨æˆ·åï¼š"))
        self.label_passwd.setText(_translate("Form", "å¯†ç ï¼š"))
        self.Inter.setText(_translate("Form", "ç™»å½•"))
        self.label.setText(_translate("Form", "ç”¨æˆ·ç™»å½•ç•Œé¢"))

```

`drug.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'drug.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_drug(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(640, 480)
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(210, 40, 211, 61))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.label.setFont(font)
        self.label.setStyleSheet("background-color: rgb(255, 170, 255);")
        self.label.setObjectName("label")
        self.red = QtWidgets.QPushButton(Form)
        self.red.setGeometry(QtCore.QRect(140, 150, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.red.setFont(font)
        self.red.setStyleSheet("background-color: rgb(255, 36, 17);")
        self.red.setObjectName("red")
        self.green = QtWidgets.QPushButton(Form)
        self.green.setGeometry(QtCore.QRect(140, 280, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.green.setFont(font)
        self.green.setStyleSheet("background-color: rgb(29, 255, 29);")
        self.green.setObjectName("green")
        self.title = QtWidgets.QPushButton(Form)
        self.title.setGeometry(QtCore.QRect(360, 150, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.title.setFont(font)
        self.title.setStyleSheet("background-color: rgb(31, 24, 255);")
        self.title.setObjectName("title")
        self.crey = QtWidgets.QPushButton(Form)
        self.crey.setGeometry(QtCore.QRect(360, 280, 121, 81))
        font = QtGui.QFont()
        font.setPointSize(20)
        self.crey.setFont(font)
        self.crey.setStyleSheet("background-color: rgb(102, 240, 255);")
        self.crey.setObjectName("crey")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "Form"))
        self.label.setText(_translate("Form", "è¯å“ä»“åº“ç¤ºæ„"))
        self.red.setText(_translate("Form", "1å·"))
        self.green.setText(_translate("Form", "3å·"))
        self.title.setText(_translate("Form", "2å·"))
        self.crey.setText(_translate("Form", "4å·"))

```

`regist.py`

```python
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'regist.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets


class Ui_regist(object):
    def setupUi(self, widget):
        widget.setObjectName("widget")
        widget.resize(640, 480)
        self.regist_user = QtWidgets.QLabel(widget)
        self.regist_user.setGeometry(QtCore.QRect(180, 90, 91, 31))
        self.regist_user.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_user.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_user.setFont(font)
        self.regist_user.setObjectName("regist_user")
        self.text_user = QtWidgets.QLineEdit(widget)
        self.text_user.setGeometry(QtCore.QRect(280, 90, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_user.setFont(font)
        self.text_user.setObjectName("text_user")
        self.text_passwd = QtWidgets.QLineEdit(widget)
        self.text_passwd.setGeometry(QtCore.QRect(280, 150, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_passwd.setFont(font)
        self.text_passwd.setObjectName("text_passwd")
        self.text_passwd_Q = QtWidgets.QLineEdit(widget)
        self.text_passwd_Q.setGeometry(QtCore.QRect(280, 210, 141, 31))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.text_passwd_Q.setFont(font)
        self.text_passwd_Q.setObjectName("text_passwd_Q")
        self.regist_passwd_Q = QtWidgets.QLabel(widget)
        self.regist_passwd_Q.setGeometry(QtCore.QRect(180, 210, 91, 31))
        self.regist_passwd_Q.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_passwd_Q.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_passwd_Q.setFont(font)
        self.regist_passwd_Q.setObjectName("regist_passwd_Q")
        self.regist_passwd = QtWidgets.QLabel(widget)
        self.regist_passwd.setGeometry(QtCore.QRect(180, 150, 91, 31))
        self.regist_passwd.setMinimumSize(QtCore.QSize(0, 0))
        self.regist_passwd.setBaseSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.regist_passwd.setFont(font)
        self.regist_passwd.setObjectName("regist_passwd")
        self.Regist = QtWidgets.QPushButton(widget)
        self.Regist.setGeometry(QtCore.QRect(250, 280, 111, 41))
        font = QtGui.QFont()
        font.setPointSize(12)
        self.Regist.setFont(font)
        self.Regist.setStyleSheet("background-color: rgb(0, 0, 255);")
        self.Regist.setObjectName("Regist")

        self.retranslateUi(widget)
        QtCore.QMetaObject.connectSlotsByName(widget)

    def retranslateUi(self, widget):
        _translate = QtCore.QCoreApplication.translate
        widget.setWindowTitle(_translate("widget", "æ³¨å†Œ"))
        self.regist_user.setText(_translate("widget", "è¾“å…¥è´¦å·:"))
        self.regist_passwd_Q.setText(_translate("widget", "ç¡®è®¤å¯†ç :"))
        self.regist_passwd.setText(_translate("widget", "è¾“å…¥å¯†ç :"))
        self.Regist.setText(_translate("widget", "æ³¨å†Œ"))

```

è°ƒç”¨å‡½æ•°`Demo1.py`ï¼š

```python
import sys
# è¿™éƒ¨åˆ†å°±æ˜¯è‡ªå®šä¹‰å‡½æ•°åº“ï¼Œfrom æ–‡ä»¶å import å‡½æ•°å/ç±»
from demoUI import Ui_Form
from regist import Ui_regist
from drug import Ui_drug
#
from PyQt5.QtWidgets import QApplication, QMainWindow


class MainWindow(QMainWindow, Ui_Form):
    def __init__(self):
        super(MainWindow, self).__init__()
        self.setupUi(self)


class Register(QMainWindow, Ui_regist):
    def __init__(self, parent=None):
        super(Register, self).__init__(parent)
        self.setupUi(self)

    def Open(self):
        self.show()


class Drug(QMainWindow, Ui_drug):
    def __init__(self, parent=None):
        super(Drug, self).__init__(parent)
        self.setupUi(self)

    def Open(self):
        self.show()


if __name__ == "__main__":
    app = QApplication(sys.argv)
    main = MainWindow()
    register = Register()
    drug = Drug()
    main.resign.clicked.connect(register.Open)
    main.Inter.clicked.connect(drug.Open)
    main.show()
    sys.exit(app.exec_())

```

### 4.5 ä»£ç æ±‡æ€»

> å…¶å®å†³èµ›å’Œåˆèµ›æœ€é‡è¦åŒºåˆ«å°±æ˜¯åˆ†ç±»çš„æ•°é‡ï¼Œå½“æ•°é‡ä¸º1çš„æ—¶å€™ç”¨ç¿»æ–—ï¼Œå¤§äºç­‰äº2ç”¨æœºæ¢°è‡‚ã€‚æ‰€ä»¥æœ€ååˆèµ›å†³èµ›å¯ä»¥ç”¨åŒä¸€å¥—ä»£ç ã€‚

**å†³èµ›ä»£ç **`Municipal_contest.py`

```python
from pathlib import Path
from threading import Thread, Event
from PyQt5.QtCore import Qt,QCoreApplication
from PyQt5.QtWidgets import *
from PyQt5.QtGui import *
from PyQt5.Qt import QUrl

from omxplayer import OMXPlayer
from pathlib import Path
import sys
import time
import serial
import RPi.GPIO as GPIO
import cv2
import numpy as np
import onnxruntime as ort
import random as rd

GPIO.setmode(GPIO.BOARD)
GPIO.setwarnings(False)
video1 = 16
# è®¾ç½®è¯»å–å¼•è„šï¼Œä½ç”µé¢‘æ‰«æ
GPIO.setup(video1,GPIO.IN)

def get_key(dict, m_num):
    for key,values in dict.items():
        if values == m_num:
            return key
   

      


# yolov5è¯†åˆ«
def plot_one_box(x, img, color=None, label=None, line_thickness=None):
    """
    description: Plots one bounding box on image img,
                 this function comes from YoLov5 project.
    param: 
        x:      a box likes [x1,y1,x2,y2]
        img:    a opencv image object
        color:  color to draw rectangle, such as (0,255,0)
        label:  str
        line_thickness: int
    return:
        no return
    """
    tl = (
        line_thickness or round(0.002 * (img.shape[0] + img.shape[1]) / 2) + 1
    )  # line/font thickness
    color = color or [random.randint(0, 255) for _ in range(3)]
    x=x.squeeze()
    c1, c2 = (int(x[0]), int(x[1])), (int(x[2]), int(x[3]))
    cv2.rectangle(img, c1, c2, color, thickness=tl, lineType=cv2.LINE_AA)
    if label:
        tf = max(tl - 1, 1)  # font thickness
        t_size = cv2.getTextSize(label, 0, fontScale=tl / 3, thickness=tf)[0]
        c2 = c1[0] + t_size[0], c1[1] - t_size[1] - 3
        cv2.rectangle(img, c1, c2, color, -1, cv2.LINE_AA)  # filled
        cv2.putText(
            img,
            label,
            (c1[0], c1[1] - 2),
            0,
            tl / 3,
            [225, 255, 255],
            thickness=tf,
            lineType=cv2.LINE_AA,
        )
 
def _make_grid( nx, ny):
        xv, yv = np.meshgrid(np.arange(ny), np.arange(nx))
        return np.stack((xv, yv), 2).reshape((-1, 2)).astype(np.float32)
 
def cal_outputs(outs,nl,na,model_w,model_h,anchor_grid,stride):
    
    row_ind = 0
    grid = [np.zeros(1)] * nl
    for i in range(nl):
        h, w = int(model_w/ stride[i]), int(model_h / stride[i])
        length = int(na * h * w)
        if grid[i].shape[2:4] != (h, w):
            grid[i] = _make_grid(w, h)
 
        outs[row_ind:row_ind + length, 0:2] = (outs[row_ind:row_ind + length, 0:2] * 2. - 0.5 + np.tile(
            grid[i], (na, 1))) * int(stride[i])
        outs[row_ind:row_ind + length, 2:4] = (outs[row_ind:row_ind + length, 2:4] * 2) ** 2 * np.repeat(
            anchor_grid[i], h * w, axis=0)
        row_ind += length
    return outs
 
 
 
def post_process_opencv(outputs,model_h,model_w,img_h,img_w,thred_nms,thred_cond):
    conf = outputs[:,4].tolist()
    c_x = outputs[:,0]/model_w*img_w
    c_y = outputs[:,1]/model_h*img_h
    w  = outputs[:,2]/model_w*img_w
    h  = outputs[:,3]/model_h*img_h
    p_cls = outputs[:,5:]
    if len(p_cls.shape)==1:
        p_cls = np.expand_dims(p_cls,1)
    cls_id = np.argmax(p_cls,axis=1)
 
    p_x1 = np.expand_dims(c_x-w/2,-1)
    p_y1 = np.expand_dims(c_y-h/2,-1)
    p_x2 = np.expand_dims(c_x+w/2,-1)
    p_y2 = np.expand_dims(c_y+h/2,-1)
    areas = np.concatenate((p_x1,p_y1,p_x2,p_y2),axis=-1)
    
    areas = areas.tolist()
    ids = cv2.dnn.NMSBoxes(areas,conf,thred_cond,thred_nms)
    if len(ids)>0:
        return  np.array(areas)[ids],np.array(conf)[ids],cls_id[ids]
    else:
        return [],[],[]
def infer_img(img0,net,model_h,model_w,nl,na,stride,anchor_grid,thred_nms=0.4,thred_cond=0.5):
    # å›¾åƒé¢„å¤„ç†
    img = cv2.resize(img0, (model_w,model_h), interpolation=cv2.INTER_AREA)
    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
    img = img.astype(np.float32) / 255.0
    blob = np.expand_dims(np.transpose(img, (2, 0, 1)), axis=0)
 
    # æ¨¡å‹æ¨ç†
    outs = net.run(None, {net.get_inputs()[0].name: blob})[0].squeeze(axis=0)
 
    # è¾“å‡ºåæ ‡çŸ«æ­£
    outs = cal_outputs(outs,nl,na,model_w,model_h,anchor_grid,stride)
 
    # æ£€æµ‹æ¡†è®¡ç®—
    img_h,img_w,_ = np.shape(img0)
    boxes,confs,ids = post_process_opencv(outs,model_h,model_w,img_h,img_w,thred_nms,thred_cond)
 
    return  boxes,confs,ids

# å¾—åˆ°ä¸­å¿ƒåæ ‡
def get_centre(x_list):
    c_x = (x_list[0] + x_list[2]) / 2
    c_y = (x_list[1] + x_list[3]) / 2
#     c_x = c_x*np.cos(np.radians(45))-c_y*np.sin(np.radians(45))
#     c_y = c_y*np.cos(np.radians(45))+c_x*np.sin(np.radians(45))
    c_list = [c_y, c_x]
    # è¿”å›ä¸­å¿ƒåæ ‡åˆ—è¡¨
    return c_list


# å¾—åˆ°é¢ç§¯
def get_area(label_list):
    length = label_list[2] - label_list[0]
    height = label_list[3] - label_list[1]
    area = []
    # é¢ç§¯
    area.append(length * height)
    area.append(length/height)
    return area


# å¾—åˆ°æœ€å¤§é¢ç§¯çš„åæ ‡
def get_data(c_list, ids_, scores_, dic_labels):

    # è·å–åæ ‡è¯†åˆ«æ ‡ç­¾ä¸ªæ•°
    coordinate_length = len(c_list)
    # ä¸­å¿ƒåæ ‡åˆ—è¡¨
    centre_list = []
    area_list = []
    l_h_list = []
    for i in range(int(coordinate_length)):
        # è·å–æ¯ä¸ªæ ‡ç­¾çš„åæ ‡åˆ—è¡¨
        coordinate = c_list[i][0]
        
        # è·å–é¢ç§¯å’Œé•¿å®½æ¯”
        area, l_h = get_area(coordinate)
        if area > 100000:
            break
        # ä¸­å¿ƒç‚¹åæ ‡åˆ—è¡¨
        centre_list.append(get_centre(coordinate))
        # é¢ç§¯åˆ—è¡¨
        area_list.append(area)
        # è·å–é•¿å®½æ¯”()
        l_h_list.append(l_h)
    if area_list:
        max_area = max(area_list)
        area_index = area_list.index(max_area)
        target = centre_list[area_index]
        id_ = ids_[area_index]
        label = dic_labels[ids_[area_index].item()]
        score = scores_[area_index]
        box = c_list[area_index]
        l_h = l_h_list[area_index]
        return box, target, label, score, l_h, id_, len(area_list),ids_
    else:
        return None, None, None, None, None, None, None, None
 


exit_flag = Event()
class Demo:
    def __init__(self):

        """æ§ä»¶åˆå§‹åŒ–"""
        self.ui = QMainWindow()
        self.label = QLabel(self.ui)
        self.map_label = QLabel(self.ui)
        self.map2_label = QLabel(self.ui)

        self.video_button = QPushButton("åˆ›é“­", self.ui)
        self.map_button = QPushButton("æ™ºé€ ", self.ui)
        self.close_button = QPushButton("ç»“æŸ", self.ui)

        # self.textLabel = QLabel(self.ui)
        self.list = QListWidget(self.ui)
        # åˆ›å»ºè¡¨æ ¼
        rows = 6  # è¡Œ
        columns = 2  # åˆ—
        
        self.table = QTableWidget(rows, columns, self.ui)
        self.thread_serial = Thread(
            target=self.thread_serial,
            args=(9600,)
            )
        self.thread_text = Thread(
            target=self.Text_time
        )
        self.thread_yolov5 = Thread(
            target=self.thread_yolov5)
     
        self.pic_control()
        
        # å±æ€§åˆå§‹åŒ–å‡½æ•°è°ƒç”¨
        self.LayoutInit()
        self.WidgetInit()
        self.tabel_items()
#         self.add_list_items()
        self.Signal()
#         thread_text.start()
        self.thread_serial.start()
        self.thread_yolov5.start()

    # Layoutç•Œé¢
    def LayoutInit(self):
        central_widget = QWidget(self.ui)
        self.ui.setCentralWidget(central_widget)
        layout_v = QVBoxLayout(central_widget)
        layout_h = QHBoxLayout(central_widget)
        layout_h2 = QHBoxLayout(central_widget)
        layout_h3 = QHBoxLayout(central_widget)

        layout_h.addWidget(self.label)
        layout_h.addWidget(self.video_button)
        layout_h.addWidget(self.map_button)
        layout_h.addWidget(self.close_button)
        layout_h.setStretch(0, 7)
        layout_h.setStretch(1, 1)
        layout_h.setStretch(2, 1)
        layout_h.setStretch(3, 1)
        layout_h.setSpacing(50)

        layout_h2.addWidget(self.map2_label)
        layout_h2.addWidget(self.map_label)
        layout_h2.setStretch(0, 5)
        layout_h2.setStretch(1, 7)
        layout_h2.setSpacing(0)

        layout_h3.addWidget(self.table)
        layout_h3.addWidget(self.list)
        layout_h3.setStretch(0, 4)
        layout_h3.setStretch(1, 10)
        layout_h3.setSpacing(50)

        layout_v.addLayout(layout_h)
        layout_v.addLayout(layout_h2)
        layout_v.addLayout(layout_h3)
        layout_v.setStretch(0, 1)
        layout_v.setStretch(1, 6)
        layout_v.setStretch(2, 3)

        self.ui.setLayout(layout_v)
    


    def thread_yolov5(self):
        # æ¨¡å‹åŠ è½½
        model_pb_path = "/home/pi/Py_Projects/G_final.onnx"
        so = ort.SessionOptions()
        net = ort.InferenceSession(model_pb_path, so)
        
        # æ ‡ç­¾å­—å…¸
      
        dic_labels={
            0:"0-plastic_bottle",
            1:"0-drink_can",
            2:"0-paper",
            3:"0-carton",
            4:"0-milkCarton",
            5:"1-pericarp",
            6:"1-vegetable_leaf",
            7:"1-radish",
            8:"1-potato",
            9:"1-fruits",
            10:"2-battery",
            11:"2-Expired_drug",
            12:"2-button cell",
            13:"2-thermometer",
            14:"3-tile",
            15:"3-cobblestone",
            16:"3-brick",
            17:"3-paperCup",
            18:"3-tableware",
            19:"3-chopsticks",
            20:"3-butt",
            21:"3-mask"
            }
        recoverable = [0, 1, 2, 3, 4, 17]
        kitchen_garbage = [6, 7, 8, 9, 5]
        harmful = [11, 12, 13, 10]
        others = [15, 16, 18, 19, 20, 21, 14]
        # æ¨¡å‹å‚æ•°
        model_h = 320
        model_w = 320
        nl = 3
        na = 3
        stride=[8.,16.,32.]
        anchors = [[10, 13, 16, 30, 33, 23], [30, 61, 62, 45, 59, 119], [116, 90, 156, 198, 373, 326]]
        anchor_grid = np.asarray(anchors, dtype=np.float32).reshape(nl, -1, 2)
        
        
        video = -1
        cap = cv2.VideoCapture(video)
        ser = serial.Serial("/dev/ttyAMA0", 9600)
        num=0
        id_list=[]
        lengths=[]
        target_y=[]
#         cenx_list={}
#         ceny_list={}
        temp=1
        global player
        VIDEO_PATH = Path("/home/pi/Videos/video.mp4")#åŠ ç²—çš„æ–‡å­—è¯·è‡ªè¡Œæ›¿æ¢æˆè‡ªå·±çš„è·¯å¾„è·Ÿæ–‡ä»¶å
        player = OMXPlayer(VIDEO_PATH,args=['--loop', '--no-osd'])
#         time_able=1
#         enable=0
#         global start
#         start=0
#         start_=0
        # åƒåœ¾æ•°é‡çŠ¶æ€ 1:åƒåœ¾æ•°é‡>0 0:æ•°é‡å½’0
        StatusAmount=1
        while True and not exit_flag.is_set():
            
            success, img0 = cap.read()
            t1 = time.time()
            if success:
                det_boxes, scores, ids = infer_img(img0, net, model_h, model_w, nl, na, stride, anchor_grid,
                                                           thred_nms=0.4, thred_cond=0.5)
                t2 = time.time()
                if temp==0:
                    player.quit()
                else:
                    if player.is_playing():
                        print("è§†é¢‘æ­£åœ¨æ’­æ”¾")
                    else:
                        print("è§†é¢‘æœªåœ¨æ’­æ”¾")
#                 print(GPIO.input(video1)==GPIO.LOW)
                if GPIO.input(video1)==GPIO.LOW:
    #                 print("-"*100)
                    box, target, label, score, l_h, id, length, labels = get_data(det_boxes, ids, scores, dic_labels)
                    # åˆ¤æ–­idä¸ªæ•°ï¼Œ>=2,æ¬¡æ•°å¢åŠ 
                    
                            
    #                 print(f"box:{box}\ntarget:{target}\nlabel:{label}\nscore:{score}\n L-h:{l_h}")
    #                 print("-" * 100)
    #                 print(f"ä¸­å¿ƒåæ ‡ï¼š{target}")
#                     print(f"lables:{labels}")
#                     if not length:
#                         StatusAmount=0
#                 
#                     if time_able==1 and enable==1:
#                         start=time.time()
#                     
#                     time_able=0
#                     enable_start = time.time()
#                     text=str(round(enable_start-start,2))
#                     self.item_ = QTableWidgetItem(text)
#                     self.table.setItem(4, 1, self.item_)
#                     #  æ‰«æå»¶æ—¶
#                     if enable_start-start>=5 or StatusAmount:
#                         start_=1
#                         StatusAmount=1
              
                    # è¶…æ—¶åˆ¤æ–­
#                     if start:
#                         end=time.time()
#                         text=str(round(end-start,2))
#                         self.item_ = QTableWidgetItem(text)
#                         self.table.setItem(4, 1, self.item_)
# #                         self.label.setText(text)
#                         if end-start >=15:
#                             self.label.setText("å·²ç»è¶…æ—¶")
#                             print(f"å¼€å§‹æ—¶é—´ï¼š{start}ç»“æŸæ—¶é—´ï¼š{end}æ—¶å·®ï¼š{end-start}s")
#                             start=0
#                             time_able=1
#                             ser.write(bytes(f'0#0#4#a#o\n', 'utf-8'))
#                             num += 1
#                             self.add_list_items(f"{num}-å…¶ä»–åƒåœ¾-1-okk")
                            
                    
                    if label:
#                         enable=1
#                         #åˆ·æ–°è®¡æ•°
#                         start=time.time()
                        if id_list==[]:
                            if length>=2:
                                times=15
                            else:
                                times=7
                        
                        temp=0
                        label = '%s:%.2f'%(dic_labels[id.item()],score)
                        r = rd.randint(0, 255)
                        g = rd.randint(0, 255)
                        b = rd.randint(0, 255)
                        plot_one_box(box.astype(np.int16), img0, color=(r, g, b), label=label, line_thickness=2)
                        
                        id = id.item()
                        id_list.append(id)
                        lengths.append(length)
                        print(lengths)
#                         cen_x = round(target[0], 1)
#                         cen_y = round(target[1], 1)
#                         if id in cenx_list:
#                             cenx_list[id].append(cen_x)
#                         else:
#                             cenx_list[id]=[cen_x]
#                         if id in ceny_list:
#                             ceny_list[id].append(cen_y)
#                         else:
#                             ceny_list[id]=[cen_y]
                        
#                         print(cenx_list)
                        
                        if len(id_list)>=times:
                            # åˆ¤æ–­åƒåœ¾æ•°é‡
#                             length=max(lengths)
                            len_idct={}
                            for length in lengths:
                                len_idct[length] = len_idct.get(length, 0)+1
                            length=max(len_idct.keys())
                            lengths=[]
                            id_dict={}
                            for id in id_list:
                                id_dict[id] = id_dict.get(id, 0)+1
                            
                            max_num = max(id_dict.values())
                            # è¿”å›é¢‘ç‡æœ€é«˜çš„æ ‡ç­¾
                            id_1 = get_key(id_dict, max_num)
                            # åˆ¤æ–­å‘é€æ ‡ç­¾,idæ•°é‡ä¸º1,è¿”å›å¹³å‡æ ‡ç­¾
                            if times==7:
                                id = id_1
                            # å¹³å‡åæ ‡
#                             cen_x = round(sum(cenx_list[id])/len(cenx_list[id]),1)
#                             cen_y = round(sum(ceny_list[id])/len(ceny_list[id]),1)
#                             print(f"ceshi:{cenx_list[id]}")
#                             print(f"ceshi:{ceny_list[id]}")
    #                         if max_num < 3:
    #                             id_list=[]

                                
                                
                            print(label)
                            # æ±‚ä¸­å¿ƒåæ ‡çš„å¹³å‡å€¼
                            cen_x = round(target[0], 1)
                            cen_y = round(target[1], 1)
                            print(f"cen_x:{cen_x}")
                            print(f"cen_y:{cen_y}")
                            print(f"æ•°é‡ï¼š{length}")
                            if length >1:
                                move='o'
                                
                            else:
                                move='o'
                                # åƒåœ¾æ•°é‡å½’1,çŠ¶æ€ä¸º0,å¼€å§‹4ç§’å»¶æ—¶
                                
                            if l_h >1:
                                dir='b'
                            else:
                                dir='a'
                            
                            if id in recoverable:
                                ser.write(bytes(f'{cen_x}#{cen_y}#1#{dir}#{move}\n', 'utf-8')) #å¯å›æ”¶
                                print(f'{cen_x}#{cen_y}#1#{dir}#{move}\n')
                                num+=1
                                self.add_list_items(f"{num}-å¯å›æ”¶åƒåœ¾-1-okk")
                        
                            if id in kitchen_garbage:
                            
                                ser.write(bytes(f'{cen_x}#{cen_y}#3#{dir}#{move}\n', 'utf-8')) # å¨ä½™åƒåœ¾
                                print(f'{cen_x}#{cen_y}#3#{dir}#{move}\n')
                                num+=1
                                self.add_list_items(f"{num}-å¨ä½™åƒåœ¾-1-okk")
                            if id in harmful:
                                
                                ser.write(bytes(f'{cen_x}#{cen_y}#2#{dir}#{move}\n', 'utf-8')) #æœ‰å®³åƒåœ¾
                                print(f'{cen_x}#{cen_y}#2#{dir}#{move}')
                                
                                num+=1
                                self.add_list_items(f"{num}-æœ‰å®³åƒåœ¾-1-okk")
                            if id in others:
                                ser.write(bytes(f'{cen_x}#{cen_y}#4#{dir}#{move}\n', 'utf-8'))
                                print(f'{cen_x}#{cen_y}#4#{dir}#{move}\n')
                                num+=1
                                self.add_list_items(f"{num}-å…¶ä»–åƒåœ¾-1-okk")
                            
                            id_list=[]
#                             cenx_list={}
#                             ceny_list={}
                            

                            
                else:
                    id_list=[]
#                     cenx_list={}
#                     ceny_list={}
#                     start=time.time()
#                     start_=0
#                     time_able=1
            
                str_FPS = "FPS: %.2f"%(1./(t2-t1))
                cv2.putText(img0,str_FPS,(40,40),cv2.FONT_HERSHEY_COMPLEX,1,(90,10,70),2)                 
                
                show = cv2.resize(img0, (640, 480))  # æŠŠè¯»åˆ°çš„å¸§çš„å¤§å°é‡æ–°è®¾ç½®ä¸º 640x480
                show = cv2.cvtColor(show, cv2.COLOR_BGR2RGB)  # è§†é¢‘è‰²å½©è½¬æ¢å›RGBï¼Œè¿™æ ·æ‰æ˜¯ç°å®çš„é¢œè‰²
                showImage = QImage(show.data, show.shape[1], show.shape[0],
                                                  QImage.Format_RGB888)  # æŠŠè¯»å–åˆ°çš„è§†é¢‘æ•°æ®å˜æˆQImageå½¢å¼
                self.map_label.setPixmap(QPixmap.fromImage(showImage))  # å¾€æ˜¾ç¤ºè§†é¢‘çš„Labelé‡Œ æ˜¾ç¤ºQImage
                self.map_label.setScaledContents(True)  

                            
    def stop_video(self):
        try:
            if  player.is_playing():
                player.quit()
                print("è§†é¢‘å·²åœæ­¢æ’­æ”¾")
        except Exception:
            print("meiyou1")
        exit_flag.set()

        # ç­‰å¾…çº¿ç¨‹ç»“æŸ
        self.thread_serial.join()
        self.thread_yolov5.join()
        self.ui.close()


    def thread_serial(self, boot):
        ser = serial.Serial("/dev/ttyUSB0", boot)
        data=['w', 'W', 'Y', 'y', 'R', 'r', 'B', 'b']
        while True and not exit_flag.is_set():
            
            if not ser.isOpen():
                ser.open()
            count = ser.inWaiting()
            if count > 0:
                recv = ser.read().decode('utf-8',"ignore")
                
                if recv == 'w':
                    self.item = QTableWidgetItem("æ»¡è½½")
                    self.table.setItem(0, 1, self.item)
#                     GPIO.output(LED_white, 1)
                    
                if recv == 'W':
                    self.item = QTableWidgetItem("æœªæ»¡è½½")
                    self.table.setItem(0, 1, self.item)
#                     GPIO.output(LED_white, 0)
                if recv == 'y':
                    self.item = QTableWidgetItem("æ»¡è½½")
                    self.table.setItem(1, 1, self.item)
#                     GPIO.output(LED_yellow, 1)
                    
                if recv == 'Y':
                    self.item = QTableWidgetItem("æœªæ»¡è½½")
                    self.table.setItem(1, 1, self.item)
#                     GPIO.output(LED_yellow, 0)
                if recv == 'b':
                    self.item = QTableWidgetItem("æ»¡è½½")
                    self.table.setItem(2, 1, self.item)
#                     GPIO.output(LED_blue, 1)
                    
                if recv == 'B':
                    self.item = QTableWidgetItem("æœªæ»¡è½½")
                    self.table.setItem(2, 1, self.item)
#                     GPIO.output(LED_blue, 0)
                if recv == 'r':
                    self.item = QTableWidgetItem("æ»¡è½½")
                    self.table.setItem(3, 1, self.item)
#                     GPIO.output(LED_red, 1)
                    
                if recv == 'R':
                    self.item = QTableWidgetItem("æœªæ»¡è½½")
                    self.table.setItem(3, 1, self.item)
#                     GPIO.output(LED_red, 0)
                
                print(f"recv:{recv}")
                time.sleep(0.1)
            
                

    def Text_time(self):
        while True:
            text = "â¤â¤â¤â¤â¤åœ°çƒç¯ä¿å«å£«â¤â¤â¤â¤â¤"
            for i in range(135):
                self.label.setText(text)
#                 time.sleep(0.1)
                text = ' ' + text


    def tabel_items(self):
        font_tabel = self.table.font()
        font_tabel.setPointSize(20)
        self.table.setFont(font_tabel)
        self.item1 = QTableWidgetItem("å…¶ä»–åƒåœ¾")
        self.table.setItem(0, 0, self.item1)
        self.item2 = QTableWidgetItem("å¨ä½™åƒåœ¾")
        self.table.setItem(1, 0, self.item2)
        self.item3 = QTableWidgetItem("æœ‰å®³åƒåœ¾")
        self.table.setItem(2, 0, self.item3)
        self.item4 = QTableWidgetItem("å¯å›æ”¶åƒåœ¾")
        self.table.setItem(3, 0, self.item4)
        self.item5 = QTableWidgetItem("æœªæ»¡è½½")
        self.item6 = QTableWidgetItem("æœªæ»¡è½½")
        self.item7 = QTableWidgetItem("æœªæ»¡è½½")
        self.item8 = QTableWidgetItem("æœªæ»¡è½½")
        self.table.setItem(0, 1, self.item5)
        self.table.setItem(1, 1, self.item6)
        self.table.setItem(2, 1, self.item7)
        self.table.setItem(3, 1, self.item8)
        self.item9 = QTableWidgetItem("è®¡æ—¶å™¨--")
        self.item10 = QTableWidgetItem("0")
        self.table.setItem(4, 0, self.item9)
        self.table.setItem(4, 1, self.item10)


    def add_list_items(self, label):
        
        print(f"åˆ—è¡¨æ•°é‡{self.list.count()}")
        news = QListWidgetItem(label)
        self.list.addItem(news)
#         self.list.scrollToBottom()
#         self.list.scrollToItem(news, QListWidget.PositionAtBottom)
#         self.list.setCurrentRow(self.list.count() - 1)


    # æ§ä»¶åˆå§‹åŒ–
    def WidgetInit(self):
        self.ui.setWindowTitle("ui")
        self.ui.resize(177 * 4, 400)
        self.label.setFrameStyle(QFrame.Panel | QFrame.Sunken)
        self.table.setShowGrid(False)  # æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼
        self.table.setHorizontalHeaderLabels(["ç±»åˆ«", "æ˜¯å¦æ»¡è½½"])
        self.table.horizontalHeader().setSectionResizeMode(QHeaderView.Stretch)
        font_list = self.list.font()
        font_list.setPointSize(15)
        self.list.setFont(font_list)
        # self.label.setAlignment(Qt.AlignCenter)
        map_widget = QPixmap("/home/pi/Pictures/å¥³ç¥/17.jpg")
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)

    def pic_control(self):
        pic_list = ["/home/pi/Pictures/å·¥åˆ›èµ›å›¾é›†/logo.jpg", "/home/pi/Pictures/6.jpg"]
            
        map_widget = QPixmap(pic_list[0])
            
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map2_label.setPixmap(map_widget)
        self.map2_label.setScaledContents(True)
        
    # ä¿¡å·æ§½å‡½æ•°åˆå§‹åŒ–
    def Signal(self):
        self.video_button.clicked.connect(self.GetMap2)
        self.map_button.clicked.connect(self.GetMap)
#         self.close_button.clicked.connect(QCoreApplication.instance().quit)
        self.close_button.clicked.connect(self.stop_video)

    def GetMap2(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map2_label.setPixmap(map_widget)
        self.map2_label.setScaledContents(True)


    def GetMap(self):
        video = QFileDialog()
        url = video.getOpenFileUrl()[0].toLocalFile()
        map_widget = QPixmap(url)
        map_widget = map_widget.scaled(177 * 3, 300)
        self.map_label.setPixmap(map_widget)
        self.map_label.setScaledContents(True)


if __name__ == "__main__":
#         temp=1
#         VIDEO_PATH = Path("/home/pi/Videos/video.mp4")#åŠ ç²—çš„æ–‡å­—è¯·è‡ªè¡Œæ›¿æ¢æˆè‡ªå·±çš„è·¯å¾„è·Ÿæ–‡ä»¶å
#         player = OMXPlayer(VIDEO_PATH,args=['--loop', '--no-osd'])
#         while temp==1:
#             if GPIO.input(video1)==1:
#                 player.quit()
#                 temp=0

        app = QApplication(sys.argv)
        bar = Demo()
        bar.ui.show()
        bar.ui.showFullScreen()
        sys.exit(app.exec_())

```

> **è¿™é‡Œé—®é¢˜å‰é¢æåˆ°è¿‡ï¼Œä¸è¦æŠŠæ‰€ä»¥å†…å®¹å†™çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™æ˜¯æˆ‘çŠ¯å¾—å¾ˆä¸¥é‡çš„ä¸€ä¸ªé”™è¯¯ï¼Œä¹Ÿæ˜¯ä»£ç é¦–è¦ä¼˜åŒ–çš„åœ°æ–¹ã€‚**

## 5. æ–¹æ¡ˆä¼˜åŒ–æŒ‡å¯¼

### 5.1 é‡è¦è¯´æ˜

![1708949657516](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708949657516.png)

![confusion_matrix](https://raw.githubusercontent.com/wxnlP/pic/main/competition/confusion_matrix.png)

**é‡ç‚¹è¯´æ˜ï¼š**

æ ‡çº¢çš„æ˜¯æ–‡æ¡£æ˜ç¡®è¯´æ˜çš„ç§ç±»ï¼Œå…¶ä»–ä¸ºæˆ‘ä»¬è‡ªå·±æ·»åŠ çš„ç§ç±»ã€‚**ä½†æ˜¯ï¼Œæœ‰å‡ ç‚¹é‡è¦è¯´æ˜ï¼š**

- **æ— è®ºæ˜¯å¸‚èµ›è¿˜æ˜¯å›½èµ›ï¼Œåˆèµ›æœŸé—´åƒåœ¾ç§ç±»éƒ½æ²¡æœ‰è¶…è¿‡æ ‡çº¢èŒƒå›´ã€‚**
- **å¸‚èµ›çš„å†³èµ›ï¼Œå¤šå‡ºæ¥çš„åƒåœ¾ä¸ºåºŸçº¸å›¢å’Œçº¸æ¯ã€‚**
- **å›½èµ›åˆèµ›æœ‰ä¸€äº›æ¯”è¾ƒæŠ½è±¡çš„åƒåœ¾ã€‚**

å›½èµ›æŠ½è±¡åƒåœ¾ï¼š

1. å°ç±³æ©™è‰²ç”µæ± ï¼Œå¾ˆå®¹æ˜“è¯†åˆ«æˆèƒ¡èåœã€‚

![1708952756713](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1708952756713.png)

2. çº¯ç™½è‰²ç“·ç‰‡
3. å°åœŸè±†ï¼Œå¾ˆå°ï¼Œä¸”æ˜¯æ¹¿çš„ã€‚

**è®­ç»ƒæ¨¡å‹æ³¨é‡æ–‡æ¡£è¯´æ˜çš„åƒåœ¾ç§ç±»ï¼Œæ³¨é‡ç§ç±»ï¼Œæ¯”å¦‚ç”µæ± ï¼Œæ‰¾å„ç§å„æ ·çš„ç”µæ± ï¼Œå…¶æ¬¡æ‰æ˜¯æ•°é‡ã€‚**

### 5.2 å¸‚èµ›çš„å†³èµ›ä»»åŠ¡

> è¿™äº›ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬å½“æ—¶åŸºæœ¬éƒ½å·²ç»å‡†å¤‡å¥½äº†ï¼Œé™¤äº†çº¸æ¯å’ŒåºŸçº¸æ˜¯æ–‡æ¡£ä¸­æ²¡æœ‰è¯´æ˜çš„ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§ï¼Œå…¶ä»–ç»„å‡†å¤‡çš„ä¹Ÿä¸å®Œç¾ã€‚

![1715655628050](https://raw.githubusercontent.com/wxnlP/pic/main/competition/1715655628050.png)

## 6 è”ç³»æ–¹å¼

æˆ‘çš„Githubï¼š[wxnlP](https://github.com/wxnlP?tab=repositories)

æˆ‘çš„ä¸ªäººåšå®¢ï¼š[å°æğŸŒ™çš„æµæµªæ‰€ (tonmoon.top)](https://tonmoon.top/)

æˆ‘çš„é‚®ç®±ï¼š2661006892@qq.com

> æˆ‘çš„åšå®¢æœ‰ä¸€äº›stm32æ•™ç¨‹ï¼Œè‡ªå·±æ€»ç»“çš„ï¼Œç­‰è‡ªå·±æœ‰ç©ºä¼šæ›´æ–°ä¸€äº›å…¶ä»–åµŒå…¥å¼å’Œç”Ÿæ´»ç›¸å…³å†…å®¹ã€‚



